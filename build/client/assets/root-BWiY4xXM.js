import{r as d,c as qs,R as L,t as hn,j as y}from"./jsx-runtime-CQPF1LdT.js";import{F as V,q as Ks,r as ei,s as ti,t as ni,b as Js,u as Ys,v as bt,w as ri,x as ii,y as Xs,z as si,k as Nn,c as Qs,m as Zs,A as eo,B as to,C as no}from"./index-C9mCl7jc.js";import{B as tt}from"./Button-CsBiVYsy.js";import{p as ro,q as oi,t as io,v as so,_ as oo,r as re,L as ai,N as nt,F as cr,M as li,w as ci,S as ui,u as ao,x as lo,O as co}from"./components-DwAki7mf.js";import{G as uo}from"./iconBase-DbY_1wiR.js";import{o as di,_ as de,q as fi,r as hi,t as fo,v as ct,w as Ge,x as ho,E as On,y as Q,z as po,A as mo,B as go,C as vo,S as ut,L as yo,D as pi,F as bo,G as Ln,H as wo,I as Eo,J as ur,K as dr,M as pn,N as Io,O as _o,P as xo,Q as To,g as So,R as Co,T as Ro,U as ko,V as fr}from"./firestore.service-B-C4dBwJ.js";import{u as Mn,T as Po}from"./ToastContext-BMoWAI_y.js";/**
 * @remix-run/react v2.16.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let hr="positions";function Ao({getKey:t,...e}){let{isSpaMode:n}=ro(),r=oi(),i=io();so({getKey:t,storageKey:hr});let s=d.useMemo(()=>{if(!t)return null;let l=t(r,i);return l!==r.key?l:null},[]);if(n)return null;let o=((l,a)=>{if(!window.history.state||!window.history.state.key){let c=Math.random().toString(32).slice(2);window.history.replaceState({key:c},"")}try{let u=JSON.parse(sessionStorage.getItem(l)||"{}")[a||window.history.state.key];typeof u=="number"&&window.scrollTo(0,u)}catch(c){console.error(c),sessionStorage.removeItem(l)}}).toString();return d.createElement("script",oo({},e,{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${o})(${JSON.stringify(hr)}, ${JSON.stringify(s)})`}}))}var mi={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(t,e){(function(n,r){t.exports=r()})(qs,function(){var n={};n.version="0.2.0";var r=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(f){var g,v;for(g in f)v=f[g],v!==void 0&&f.hasOwnProperty(g)&&(r[g]=v);return this},n.status=null,n.set=function(f){var g=n.isStarted();f=i(f,r.minimum,1),n.status=f===1?null:f;var v=n.render(!g),b=v.querySelector(r.barSelector),E=r.speed,w=r.easing;return v.offsetWidth,l(function(I){r.positionUsing===""&&(r.positionUsing=n.getPositioningCSS()),a(b,o(f,E,w)),f===1?(a(v,{transition:"none",opacity:1}),v.offsetWidth,setTimeout(function(){a(v,{transition:"all "+E+"ms linear",opacity:0}),setTimeout(function(){n.remove(),I()},E)},E)):setTimeout(I,E)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var f=function(){setTimeout(function(){n.status&&(n.trickle(),f())},r.trickleSpeed)};return r.trickle&&f(),this},n.done=function(f){return!f&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(f){var g=n.status;return g?(typeof f!="number"&&(f=(1-g)*i(Math.random()*g,.1,.95)),g=i(g+f,0,.994),n.set(g)):n.start()},n.trickle=function(){return n.inc(Math.random()*r.trickleRate)},function(){var f=0,g=0;n.promise=function(v){return!v||v.state()==="resolved"?this:(g===0&&n.start(),f++,g++,v.always(function(){g--,g===0?(f=0,n.done()):n.set((f-g)/f)}),this)}}(),n.render=function(f){if(n.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var g=document.createElement("div");g.id="nprogress",g.innerHTML=r.template;var v=g.querySelector(r.barSelector),b=f?"-100":s(n.status||0),E=document.querySelector(r.parent),w;return a(v,{transition:"all 0 linear",transform:"translate3d("+b+"%,0,0)"}),r.showSpinner||(w=g.querySelector(r.spinnerSelector),w&&p(w)),E!=document.body&&u(E,"nprogress-custom-parent"),E.appendChild(g),g},n.remove=function(){m(document.documentElement,"nprogress-busy"),m(document.querySelector(r.parent),"nprogress-custom-parent");var f=document.getElementById("nprogress");f&&p(f)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var f=document.body.style,g="WebkitTransform"in f?"Webkit":"MozTransform"in f?"Moz":"msTransform"in f?"ms":"OTransform"in f?"O":"";return g+"Perspective"in f?"translate3d":g+"Transform"in f?"translate":"margin"};function i(f,g,v){return f<g?g:f>v?v:f}function s(f){return(-1+f)*100}function o(f,g,v){var b;return r.positionUsing==="translate3d"?b={transform:"translate3d("+s(f)+"%,0,0)"}:r.positionUsing==="translate"?b={transform:"translate("+s(f)+"%,0)"}:b={"margin-left":s(f)+"%"},b.transition="all "+g+"ms "+v,b}var l=function(){var f=[];function g(){var v=f.shift();v&&v(g)}return function(v){f.push(v),f.length==1&&g()}}(),a=function(){var f=["Webkit","O","Moz","ms"],g={};function v(I){return I.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(_,S){return S.toUpperCase()})}function b(I){var _=document.body.style;if(I in _)return I;for(var S=f.length,x=I.charAt(0).toUpperCase()+I.slice(1),k;S--;)if(k=f[S]+x,k in _)return k;return I}function E(I){return I=v(I),g[I]||(g[I]=b(I))}function w(I,_,S){_=E(_),I.style[_]=S}return function(I,_){var S=arguments,x,k;if(S.length==2)for(x in _)k=_[x],k!==void 0&&_.hasOwnProperty(x)&&w(I,x,k);else w(I,S[1],S[2])}}();function c(f,g){var v=typeof f=="string"?f:h(f);return v.indexOf(" "+g+" ")>=0}function u(f,g){var v=h(f),b=v+g;c(v,g)||(f.className=b.substring(1))}function m(f,g){var v=h(f),b;c(f,g)&&(b=v.replace(" "+g+" "," "),f.className=b.substring(1,b.length-1))}function h(f){return(" "+(f.className||"")+" ").replace(/\s+/gi," ")}function p(f){f&&f.parentNode&&f.parentNode.removeChild(f)}return n})})(mi);var pr=mi.exports;const No="/assets/nprogress-CSXic_Zd.css",Oo="/assets/global-D58Idb-N.css",Lo="/assets/tailwind-g1v49q2T.css",Mo="/assets/mapbox-gl-B9eh9OLo.css";/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const $o={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},gi=typeof document<"u"?L.useLayoutEffect:()=>{};function Do(t){const e=d.useRef(null);return gi(()=>{e.current=t},[t]),d.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const Te=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Ce=t=>t&&"window"in t&&t.window===t?t:Te(t).defaultView||window;function Fo(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function jo(t){return Fo(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let Uo=!1;function $n(){return Uo}function vi(t,e){if(!$n())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:jo(n)?n=n.host:n=n.parentNode}return!1}const mn=(t=document)=>{var e;if(!$n())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function yi(t){return $n()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function Ho(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function Vo(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function bi(t){let e=null;return()=>(e==null&&(e=t()),e)}const Wo=bi(function(){return Vo(/^Mac/i)}),Bo=bi(function(){return Ho(/Android/i)});function wi(){let t=d.useRef(new Map),e=d.useCallback((i,s,o,l)=>{let a=l!=null&&l.once?(...c)=>{t.current.delete(o),o(...c)}:o;t.current.set(o,{type:s,eventTarget:i,fn:a,options:l}),i.addEventListener(s,a,l)},[]),n=d.useCallback((i,s,o,l)=>{var a;let c=((a=t.current.get(o))===null||a===void 0?void 0:a.fn)||o;i.removeEventListener(s,c,l),t.current.delete(o)},[]),r=d.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return d.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function Go(t){return t.mozInputSource===0&&t.isTrusted?!0:Bo()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Ei(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function zo(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function Ii(t){let e=d.useRef({isFocused:!1,observer:null});gi(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Do(r=>{t==null||t(r)});return d.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{if(e.current.isFocused=!1,i.disabled){let l=Ei(o);n(l)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let l=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:l})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:l}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let qo=!1,dt=null,gn=new Set,rt=new Map,Ne=!1,vn=!1;const Ko={Tab:!0,Escape:!0};function Dn(t,e){for(let n of gn)n(t,e)}function Jo(t){return!(t.metaKey||!Wo()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function kt(t){Ne=!0,Jo(t)&&(dt="keyboard",Dn("keyboard",t))}function Fe(t){dt="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Ne=!0,Dn("pointer",t))}function _i(t){Go(t)&&(Ne=!0,dt="virtual")}function xi(t){t.target===window||t.target===document||qo||!t.isTrusted||(!Ne&&!vn&&(dt="virtual",Dn("virtual",t)),Ne=!1,vn=!1)}function Ti(){Ne=!1,vn=!0}function yn(t){if(typeof window>"u"||rt.get(Ce(t)))return;const e=Ce(t),n=Te(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Ne=!0,r.apply(this,arguments)},n.addEventListener("keydown",kt,!0),n.addEventListener("keyup",kt,!0),n.addEventListener("click",_i,!0),e.addEventListener("focus",xi,!0),e.addEventListener("blur",Ti,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",Fe,!0),n.addEventListener("pointermove",Fe,!0),n.addEventListener("pointerup",Fe,!0)),e.addEventListener("beforeunload",()=>{Si(t)},{once:!0}),rt.set(e,{focus:r})}const Si=(t,e)=>{const n=Ce(t),r=Te(t);e&&r.removeEventListener("DOMContentLoaded",e),rt.has(n)&&(n.HTMLElement.prototype.focus=rt.get(n).focus,r.removeEventListener("keydown",kt,!0),r.removeEventListener("keyup",kt,!0),r.removeEventListener("click",_i,!0),n.removeEventListener("focus",xi,!0),n.removeEventListener("blur",Ti,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",Fe,!0),r.removeEventListener("pointermove",Fe,!0),r.removeEventListener("pointerup",Fe,!0)),rt.delete(n))};function Yo(t){const e=Te(t);let n;return e.readyState!=="loading"?yn(t):(n=()=>{yn(t)},e.addEventListener("DOMContentLoaded",n)),()=>Si(t,n)}typeof document<"u"&&Yo();function Ci(){return dt!=="pointer"}const Xo=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Qo(t,e,n){let r=Te(n==null?void 0:n.target);const i=typeof window<"u"?Ce(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Ce(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Ce(n==null?void 0:n.target).HTMLElement:HTMLElement,l=typeof window<"u"?Ce(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!Xo.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof o&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof l&&!Ko[n.key])}function Zo(t,e,n){yn(),d.useEffect(()=>{let r=(i,s)=>{Qo(!!(n!=null&&n.isTextInput),i,s)&&t(Ci())};return gn.add(r),()=>{gn.delete(r)}},e)}function ea(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=d.useCallback(a=>{if(a.target===a.currentTarget)return r&&r(a),i&&i(!1),!0},[r,i]),o=Ii(s),l=d.useCallback(a=>{const c=Te(a.target),u=c?mn(c):mn();a.target===a.currentTarget&&u===yi(a.nativeEvent)&&(n&&n(a),i&&i(!0),o(a))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?l:void 0,onBlur:!e&&(r||i)?s:void 0}}}function ta(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=d.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:l}=wi(),a=d.useCallback(m=>{m.currentTarget.contains(m.target)&&s.current.isFocusWithin&&!m.currentTarget.contains(m.relatedTarget)&&(s.current.isFocusWithin=!1,l(),n&&n(m),i&&i(!1))},[n,i,s,l]),c=Ii(a),u=d.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const h=Te(m.target),p=mn(h);if(!s.current.isFocusWithin&&p===yi(m.nativeEvent)){r&&r(m),i&&i(!0),s.current.isFocusWithin=!0,c(m);let f=m.currentTarget;o(h,"focus",g=>{if(s.current.isFocusWithin&&!vi(f,g.target)){let v=new h.defaultView.FocusEvent("blur",{relatedTarget:g.target});zo(v,f);let b=Ei(v);a(b)}},{capture:!0})}},[r,i,c,o,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:a}}}let bn=!1,Qt=0;function na(){bn=!0,setTimeout(()=>{bn=!1},50)}function mr(t){t.pointerType==="touch"&&na()}function ra(){if(!(typeof document>"u"))return typeof PointerEvent<"u"&&document.addEventListener("pointerup",mr),Qt++,()=>{Qt--,!(Qt>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",mr)}}function ia(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=d.useState(!1),l=d.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;d.useEffect(ra,[]);let{addGlobalListener:a,removeAllGlobalListeners:c}=wi(),{hoverProps:u,triggerHoverEnd:m}=d.useMemo(()=>{let h=(g,v)=>{if(l.pointerType=v,i||v==="touch"||l.isHovered||!g.currentTarget.contains(g.target))return;l.isHovered=!0;let b=g.currentTarget;l.target=b,a(Te(g.target),"pointerover",E=>{l.isHovered&&l.target&&!vi(l.target,E.target)&&p(E,E.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:b,pointerType:v}),n&&n(!0),o(!0)},p=(g,v)=>{let b=l.target;l.pointerType="",l.target=null,!(v==="touch"||!l.isHovered||!b)&&(l.isHovered=!1,c(),r&&r({type:"hoverend",target:b,pointerType:v}),n&&n(!1),o(!1))},f={};return typeof PointerEvent<"u"&&(f.onPointerEnter=g=>{bn&&g.pointerType==="mouse"||h(g,g.pointerType)},f.onPointerLeave=g=>{!i&&g.currentTarget.contains(g.target)&&p(g,g.pointerType)}),{hoverProps:f,triggerHoverEnd:p}},[e,n,r,i,l,a,c]);return d.useEffect(()=>{i&&m({currentTarget:l.target},l.pointerType)},[i]),{hoverProps:u,isHovered:s}}function sa(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=d.useRef({isFocused:!1,isFocusVisible:e||Ci()}),[s,o]=d.useState(!1),[l,a]=d.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=d.useCallback(()=>a(i.current.isFocused&&i.current.isFocusVisible),[]),u=d.useCallback(p=>{i.current.isFocused=p,o(p),c()},[c]);Zo(p=>{i.current.isFocusVisible=p,c()},[],{isTextInput:n});let{focusProps:m}=ea({isDisabled:r,onFocusChange:u}),{focusWithinProps:h}=ta({isDisabled:!r,onFocusWithinChange:u});return{isFocused:s,isFocusVisible:l,focusProps:r?h:m}}var oa=Object.defineProperty,aa=(t,e,n)=>e in t?oa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zt=(t,e,n)=>(aa(t,typeof e!="symbol"?e+"":e,n),n);let la=class{constructor(){Zt(this,"current",this.detect()),Zt(this,"handoffState","pending"),Zt(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Pe=new la;function ze(t){var e,n;return Pe.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function Ri(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function le(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ri(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=le();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function ft(){let[t]=d.useState(le);return d.useEffect(()=>()=>t.dispose(),[t]),t}let O=(t,e)=>{Pe.isServer?d.useEffect(t,e):d.useLayoutEffect(t,e)};function qe(t){let e=d.useRef(t);return O(()=>{e.current=t},[t]),e}let A=function(t){let e=qe(t);return L.useCallback((...n)=>e.current(...n),[e])};function ca(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function ua(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function da({disabled:t=!1}={}){let e=d.useRef(null),[n,r]=d.useState(!1),i=ft(),s=A(()=>{e.current=null,r(!1),i.dispose()}),o=A(l=>{if(i.dispose(),e.current===null){e.current=l.currentTarget,r(!0);{let a=ze(l.currentTarget);i.addEventListener(a,"pointerup",s,!1),i.addEventListener(a,"pointermove",c=>{if(e.current){let u=ca(c);r(ua(u,e.current.getBoundingClientRect()))}},!1),i.addEventListener(a,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let fa=d.createContext(void 0);function ki(){return d.useContext(fa)}function wn(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function De(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,De),r}var Pt=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Pt||{}),Ie=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Ie||{});function Y(){let t=pa();return d.useCallback(e=>ha({mergeRefs:t,...e}),[t])}function ha({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:l}){l=l??ma;let a=Pi(e,t);if(s)return wt(a,n,r,o,l);let c=i??0;if(c&2){let{static:u=!1,...m}=a;if(u)return wt(m,n,r,o,l)}if(c&1){let{unmount:u=!0,...m}=a;return De(u?0:1,{0(){return null},1(){return wt({...m,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return wt(a,n,r,o,l)}function wt(t,e={},n,r,i){let{as:s=n,children:o,refName:l="ref",...a}=en(t,["unmount","static"]),c=t.ref!==void 0?{[l]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(e)),a["aria-labelledby"]&&a["aria-labelledby"]===a.id&&(a["aria-labelledby"]=void 0);let m={};if(e){let h=!1,p=[];for(let[f,g]of Object.entries(e))typeof g=="boolean"&&(h=!0),g===!0&&p.push(f.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(h){m["data-headlessui-state"]=p.join(" ");for(let f of p)m[`data-${f}`]=""}}if(s===d.Fragment&&(Object.keys(Se(a)).length>0||Object.keys(Se(m)).length>0))if(!d.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(Se(a)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Se(a)).concat(Object.keys(Se(m))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=u.props,p=h==null?void 0:h.className,f=typeof p=="function"?(...b)=>wn(p(...b),a.className):wn(p,a.className),g=f?{className:f}:{},v=Pi(u.props,Se(en(a,["ref"])));for(let b in m)b in v&&delete m[b];return d.cloneElement(u,Object.assign({},v,m,c,{ref:i(ga(u),c.ref)},g))}return d.createElement(s,Object.assign({},en(a,["ref"]),s!==d.Fragment&&c,s!==d.Fragment&&m),u)}function pa(){let t=d.useRef([]),e=d.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function ma(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Pi(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let l of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return e}function Ai(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function K(t){var e;return Object.assign(d.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Se(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function en(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function ga(t){return L.version.split(".")[0]>="19"?t.props.ref:t.ref}let va=d.createContext(void 0);function ya(){return d.useContext(va)}function ba(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&wa(n)?!1:r}function wa(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let Ni=Symbol();function Ea(t,e=!0){return Object.assign(t,{[Ni]:e})}function ne(...t){let e=d.useRef(t);d.useEffect(()=>{e.current=t},[t]);let n=A(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[Ni]))?void 0:n}let Fn=d.createContext(null);Fn.displayName="DescriptionContext";function Oi(){let t=d.useContext(Fn);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Oi),e}return t}function Ia(){let[t,e]=d.useState([]);return[t.length>0?t.join(" "):void 0,d.useMemo(()=>function(n){let r=A(s=>(e(o=>[...o,s]),()=>e(o=>{let l=o.slice(),a=l.indexOf(s);return a!==-1&&l.splice(a,1),l}))),i=d.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return L.createElement(Fn.Provider,{value:i},n.children)},[e])]}let _a="p";function xa(t,e){let n=d.useId(),r=ki(),{id:i=`headlessui-description-${n}`,...s}=t,o=Oi(),l=ne(e);O(()=>o.register(i),[i,o.register]);let a=r||!1,c=d.useMemo(()=>({...o.slot,disabled:a}),[o.slot,a]),u={ref:l,...o.props,id:i};return Y()({ourProps:u,theirProps:s,slot:c,defaultTag:_a,name:o.name||"Description"})}let Ta=K(xa);Object.assign(Ta,{});var B=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(B||{});let jt=d.createContext(null);jt.displayName="LabelContext";function jn(){let t=d.useContext(jt);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,jn),e}return t}function Sa(t){var e,n,r;let i=(n=(e=d.useContext(jt))==null?void 0:e.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function Li({inherit:t=!1}={}){let e=Sa(),[n,r]=d.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,d.useMemo(()=>function(s){let o=A(a=>(r(c=>[...c,a]),()=>r(c=>{let u=c.slice(),m=u.indexOf(a);return m!==-1&&u.splice(m,1),u}))),l=d.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return L.createElement(jt.Provider,{value:l},s.children)},[r])]}let Ca="label";function Ra(t,e){var n;let r=d.useId(),i=jn(),s=ya(),o=ki(),{id:l=`headlessui-label-${r}`,htmlFor:a=s??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=t,m=ne(e);O(()=>i.register(l),[l,i.register]);let h=A(v=>{let b=v.currentTarget;if(b instanceof HTMLLabelElement&&v.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(v),b instanceof HTMLLabelElement){let E=document.getElementById(b.htmlFor);if(E){let w=E.getAttribute("disabled");if(w==="true"||w==="")return;let I=E.getAttribute("aria-disabled");if(I==="true"||I==="")return;(E instanceof HTMLInputElement&&(E.type==="radio"||E.type==="checkbox")||E.role==="radio"||E.role==="checkbox"||E.role==="switch")&&E.click(),E.focus({preventScroll:!0})}}}),p=o||!1,f=d.useMemo(()=>({...i.slot,disabled:p}),[i.slot,p]),g={ref:m,...i.props,id:l,htmlFor:a,onClick:h};return c&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in u&&delete u.onClick),Y()({ourProps:g,theirProps:u,slot:f,defaultTag:a?Ca:"div",name:i.name||"Label"})}let ka=K(Ra);Object.assign(ka,{});function Pa(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function Aa(t,e=!1){let[n,r]=d.useReducer(()=>({}),{}),i=d.useMemo(()=>Pa(t),[t,n]);return O(()=>{if(!t)return;let s=new ResizeObserver(r);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let Na=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function Mi(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(l=>l()))}}}function $i(t){return d.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let Oa=new Na(()=>Mi(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function Un(t,e){let n=Oa.get(e),r=d.useId(),i=$i(n);if(O(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),o=i.length;return s===-1&&(s=o,o+=1),s===o-1}let En=new Map,it=new Map;function gr(t){var e;let n=(e=it.get(t))!=null?e:0;return it.set(t,n+1),n!==0?()=>vr(t):(En.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>vr(t))}function vr(t){var e;let n=(e=it.get(t))!=null?e:1;if(n===1?it.delete(t):it.set(t,n-1),n!==1)return;let r=En.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,En.delete(t))}function La(t,{allowed:e,disallowed:n}={}){let r=Un(t,"inert-others");O(()=>{var i,s;if(!r)return;let o=le();for(let a of(i=n==null?void 0:n())!=null?i:[])a&&o.add(gr(a));let l=(s=e==null?void 0:e())!=null?s:[];for(let a of l){if(!a)continue;let c=ze(a);if(!c)continue;let u=a.parentElement;for(;u&&u!==c.body;){for(let m of u.children)l.some(h=>m.contains(h))||o.add(gr(m));u=u.parentElement}}return o.dispose},[r,e,n])}function Ma(t,e,n){let r=qe(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});d.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=le();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,r,t])}let In=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),$a=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var _n=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(_n||{}),Da=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Da||{}),Fa=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Fa||{});function Di(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(In)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function ja(t=document.body){return t==null?[]:Array.from(t.querySelectorAll($a)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Hn=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Hn||{});function Vn(t,e=0){var n;return t===((n=ze(t))==null?void 0:n.body)?!1:De(e,{0(){return t.matches(In)},1(){let r=t;for(;r!==null;){if(r.matches(In))return!0;r=r.parentElement}return!1}})}function Fi(t){let e=ze(t);le().nextFrame(()=>{e&&!Vn(e.activeElement,0)&&Ha(t)})}var Ua=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Ua||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ha(t){t==null||t.focus({preventScroll:!0})}let Va=["textarea","input"].join(",");function Wa(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,Va))!=null?n:!1}function ji(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ba(t,e){return Ga(Di(),e,{relativeTo:t})}function Ga(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?ji(t):t:e&64?ja(t):Di(t);i.length>0&&o.length>1&&(o=o.filter(p=>!i.some(f=>f!=null&&"current"in f?(f==null?void 0:f.current)===p:f===p))),r=r??s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,m=o.length,h;do{if(u>=m||u+m<=0)return 0;let p=a+u;if(e&16)p=(p+m)%m;else{if(p<0)return 3;if(p>=m)return 1}h=o[p],h==null||h.focus(c),u+=l}while(h!==s.activeElement);return e&6&&Wa(h)&&h.select(),2}function Ui(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function za(){return/Android/gi.test(window.navigator.userAgent)}function qa(){return Ui()||za()}function et(t,e,n,r){let i=qe(n);d.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function Ka(t,e,n,r){let i=qe(n);d.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const yr=30;function Ja(t,e,n){let r=Un(t,"outside-click"),i=qe(n),s=d.useCallback(function(a,c){if(a.defaultPrevented)return;let u=c(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let m=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let h of m)if(h!==null&&(h.contains(u)||a.composed&&a.composedPath().includes(h)))return;return!Vn(u,Hn.Loose)&&u.tabIndex!==-1&&a.preventDefault(),i.current(a,u)},[i,e]),o=d.useRef(null);et(r,"pointerdown",a=>{var c,u;o.current=((u=(c=a.composedPath)==null?void 0:c.call(a))==null?void 0:u[0])||a.target},!0),et(r,"mousedown",a=>{var c,u;o.current=((u=(c=a.composedPath)==null?void 0:c.call(a))==null?void 0:u[0])||a.target},!0),et(r,"click",a=>{qa()||o.current&&(s(a,()=>o.current),o.current=null)},!0);let l=d.useRef({x:0,y:0});et(r,"touchstart",a=>{l.current.x=a.touches[0].clientX,l.current.y=a.touches[0].clientY},!0),et(r,"touchend",a=>{let c={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=yr||Math.abs(c.y-l.current.y)>=yr))return s(a,()=>a.target instanceof HTMLElement?a.target:null)},!0),Ka(r,"blur",a=>s(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function xn(...t){return d.useMemo(()=>ze(...t),[...t])}function Ya(t,e){return d.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function Xa(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function Qa(){return Ui()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=le();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let a=l.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let a=l.target;for(;a.parentElement&&r(a.parentElement);)a=a.parentElement;e.style(a,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let a=l.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),e.add(()=>{var l;let a=(l=window.scrollY)!=null?l:window.pageYOffset;s!==a&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Za(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function el(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Re=Mi(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:le(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:el(n)},i=[Qa(),Xa(),Za()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Re.subscribe(()=>{let t=Re.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Re.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Re.dispatch("TEARDOWN",n)}});function tl(t,e,n=()=>({containers:[]})){let r=$i(Re),i=e?r.get(e):void 0,s=i?i.count>0:!1;return O(()=>{if(!(!e||!t))return Re.dispatch("PUSH",e,n),()=>Re.dispatch("POP",e,n)},[t,e]),s}function nl(t,e,n=()=>[document.body]){let r=Un(t,"scroll-lock");tl(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function br(t){return[t.screenX,t.screenY]}function rl(){let t=d.useRef([-1,-1]);return{wasMoved(e){let n=br(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=br(e)}}}function il(t=0){let[e,n]=d.useState(t),r=d.useCallback(a=>n(a),[e]),i=d.useCallback(a=>n(c=>c|a),[e]),s=d.useCallback(a=>(e&a)===a,[e]),o=d.useCallback(a=>n(c=>c&~a),[n]),l=d.useCallback(a=>n(c=>c^a),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:l}}var sl={},wr,Er;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((wr=process==null?void 0:sl)==null?void 0:wr.NODE_ENV)==="test"&&typeof((Er=Element==null?void 0:Element.prototype)==null?void 0:Er.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ol=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(ol||{});function Hi(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function Vi(t,e,n,r){let[i,s]=d.useState(n),{hasFlag:o,addFlag:l,removeFlag:a}=il(t&&i?3:0),c=d.useRef(!1),u=d.useRef(!1),m=ft();return O(()=>{var h;if(t){if(n&&s(!0),!e){n&&l(3);return}return(h=r==null?void 0:r.start)==null||h.call(r,n),al(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(l(3),a(4)):(l(4),a(2)))},run(){u.current?n?(a(3),l(4)):(a(4),l(3)):n?a(1):l(1)},done(){var p;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,a(7),n||s(!1),(p=r==null?void 0:r.end)==null||p.call(r,n))}})}},[t,n,e,m]),t?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function al(t,{prepare:e,run:n,done:r,inFlight:i}){let s=le();return cl(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(ll(t,r))})}),s.dispose}function ll(t,e){var n,r;let i=le();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(l=>l instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),i.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{s||e()}),i.dispose)}function cl(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function ul(t,{container:e,accept:n,walk:r}){let i=d.useRef(n),s=d.useRef(r);d.useEffect(()=>{i.current=n,s.current=r},[n,r]),O(()=>{if(!e||!t)return;let o=ze(e);if(!o)return;let l=i.current,a=s.current,c=Object.assign(m=>l(m),{acceptNode:l}),u=o.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)a(u.currentNode)},[e,t,i,s])}function Ut(){return typeof window<"u"}function Ke(t){return Wi(t)?(t.nodeName||"").toLowerCase():"#document"}function X(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ce(t){var e;return(e=(Wi(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Wi(t){return Ut()?t instanceof Node||t instanceof X(t).Node:!1}function q(t){return Ut()?t instanceof Element||t instanceof X(t).Element:!1}function oe(t){return Ut()?t instanceof HTMLElement||t instanceof X(t).HTMLElement:!1}function Ir(t){return!Ut()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof X(t).ShadowRoot}function ht(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=te(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function dl(t){return["table","td","th"].includes(Ke(t))}function Ht(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Wn(t){const e=Bn(),n=q(t)?te(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function fl(t){let e=_e(t);for(;oe(e)&&!We(e);){if(Wn(e))return e;if(Ht(e))return null;e=_e(e)}return null}function Bn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function We(t){return["html","body","#document"].includes(Ke(t))}function te(t){return X(t).getComputedStyle(t)}function Vt(t){return q(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _e(t){if(Ke(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ir(t)&&t.host||ce(t);return Ir(e)?e.host:e}function Bi(t){const e=_e(t);return We(e)?t.ownerDocument?t.ownerDocument.body:t.body:oe(e)&&ht(e)?e:Bi(e)}function ot(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Bi(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=X(i);if(s){const l=Tn(o);return e.concat(o,o.visualViewport||[],ht(i)?i:[],l&&n?ot(l):[])}return e.concat(i,ot(i,[],n))}function Tn(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hl(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const Oe=Math.min,G=Math.max,at=Math.round,Et=Math.floor,ie=t=>({x:t,y:t}),pl={left:"right",right:"left",bottom:"top",top:"bottom"},ml={start:"end",end:"start"};function _r(t,e,n){return G(t,Oe(e,n))}function Je(t,e){return typeof t=="function"?t(e):t}function xe(t){return t.split("-")[0]}function pt(t){return t.split("-")[1]}function Gi(t){return t==="x"?"y":"x"}function zi(t){return t==="y"?"height":"width"}function Le(t){return["top","bottom"].includes(xe(t))?"y":"x"}function qi(t){return Gi(Le(t))}function gl(t,e,n){n===void 0&&(n=!1);const r=pt(t),i=qi(t),s=zi(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=At(o)),[o,At(o)]}function vl(t){const e=At(t);return[Sn(t),e,Sn(e)]}function Sn(t){return t.replace(/start|end/g,e=>ml[e])}function yl(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function bl(t,e,n,r){const i=pt(t);let s=yl(xe(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Sn)))),s}function At(t){return t.replace(/left|right|bottom|top/g,e=>pl[e])}function wl(t){return{top:0,right:0,bottom:0,left:0,...t}}function El(t){return typeof t!="number"?wl(t):{top:t,right:t,bottom:t,left:t}}function Nt(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function xr(t,e,n){let{reference:r,floating:i}=t;const s=Le(e),o=qi(e),l=zi(o),a=xe(e),c=s==="y",u=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,h=r[l]/2-i[l]/2;let p;switch(a){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-i.width,y:m};break;default:p={x:r.x,y:r.y}}switch(pt(e)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1);break}return p}const Il=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:m}=xr(c,r,a),h=r,p={},f=0;for(let g=0;g<l.length;g++){const{name:v,fn:b}=l[g],{x:E,y:w,data:I,reset:_}=await b({x:u,y:m,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=E??u,m=w??m,p={...p,[v]:{...p[v],...I}},_&&f<=50&&(f++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:m}=xr(c,h,a)),g=-1)}return{x:u,y:m,placement:h,strategy:i,middlewareData:p}};async function Wt(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=Je(e,t),f=El(p),v=l[h?m==="floating"?"reference":"floating":m],b=Nt(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),E=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),I=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Nt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:w,strategy:a}):E);return{top:(b.top-_.top+f.top)/I.y,bottom:(_.bottom-b.bottom+f.bottom)/I.y,left:(b.left-_.left+f.left)/I.x,right:(_.right-b.right+f.right)/I.x}}const _l=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...v}=Je(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=xe(i),E=Le(l),w=xe(l)===l,I=await(a.isRTL==null?void 0:a.isRTL(c.floating)),_=h||(w||!g?[At(l)]:vl(l)),S=f!=="none";!h&&S&&_.push(...bl(l,g,f,I));const x=[l,..._],k=await Wt(e,v),D=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&D.push(k[b]),m){const $=gl(i,o,I);D.push(k[$[0]],k[$[1]])}if(N=[...N,{placement:i,overflows:D}],!D.every($=>$<=0)){var R,F;const $=(((R=s.flip)==null?void 0:R.index)||0)+1,J=x[$];if(J)return{data:{index:$,overflows:N},reset:{placement:J}};let j=(F=N.filter(W=>W.overflows[0]<=0).sort((W,P)=>W.overflows[1]-P.overflows[1])[0])==null?void 0:F.placement;if(!j)switch(p){case"bestFit":{var M;const W=(M=N.filter(P=>{if(S){const T=Le(P.placement);return T===E||T==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(T=>T>0).reduce((T,U)=>T+U,0)]).sort((P,T)=>P[1]-T[1])[0])==null?void 0:M[0];W&&(j=W);break}case"initialPlacement":j=l;break}if(i!==j)return{reset:{placement:j}}}return{}}}};async function xl(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=xe(n),l=pt(n),a=Le(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&a?-1:1,m=Je(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:f}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof f=="number"&&(p=l==="end"?f*-1:f),a?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const Tl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,a=await xl(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+a.x,y:s+a.y,data:{...a,placement:o}}}}},Sl=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y:E}=v;return{x:b,y:E}}},...a}=Je(t,e),c={x:n,y:r},u=await Wt(e,a),m=Le(xe(i)),h=Gi(m);let p=c[h],f=c[m];if(s){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",E=p+u[v],w=p-u[b];p=_r(E,p,w)}if(o){const v=m==="y"?"top":"left",b=m==="y"?"bottom":"right",E=f+u[v],w=f-u[b];f=_r(E,f,w)}const g=l.fn({...e,[h]:p,[m]:f});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:s,[m]:o}}}}}},Cl=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:a=()=>{},...c}=Je(t,e),u=await Wt(e,c),m=xe(i),h=pt(i),p=Le(i)==="y",{width:f,height:g}=s.floating;let v,b;m==="top"||m==="bottom"?(v=m,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,v=h==="end"?"top":"bottom");const E=g-u.top-u.bottom,w=f-u.left-u.right,I=Oe(g-u[v],E),_=Oe(f-u[b],w),S=!e.middlewareData.shift;let x=I,k=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=E),S&&!h){const N=G(u.left,0),R=G(u.right,0),F=G(u.top,0),M=G(u.bottom,0);p?k=f-2*(N!==0||R!==0?N+R:G(u.left,u.right)):x=g-2*(F!==0||M!==0?F+M:G(u.top,u.bottom))}await a({...e,availableWidth:k,availableHeight:x});const D=await o.getDimensions(l.floating);return f!==D.width||g!==D.height?{reset:{rects:!0}}:{}}}};function Ki(t){const e=te(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=oe(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=at(n)!==s||at(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function Gn(t){return q(t)?t:t.contextElement}function je(t){const e=Gn(t);if(!oe(e))return ie(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Ki(e);let o=(s?at(n.width):n.width)/r,l=(s?at(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Rl=ie(0);function Ji(t){const e=X(t);return!Bn()||!e.visualViewport?Rl:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kl(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==X(t)?!1:e}function Me(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Gn(t);let o=ie(1);e&&(r?q(r)&&(o=je(r)):o=je(t));const l=kl(s,n,r)?Ji(s):ie(0);let a=(i.left+l.x)/o.x,c=(i.top+l.y)/o.y,u=i.width/o.x,m=i.height/o.y;if(s){const h=X(s),p=r&&q(r)?X(r):r;let f=h,g=Tn(f);for(;g&&r&&p!==f;){const v=je(g),b=g.getBoundingClientRect(),E=te(g),w=b.left+(g.clientLeft+parseFloat(E.paddingLeft))*v.x,I=b.top+(g.clientTop+parseFloat(E.paddingTop))*v.y;a*=v.x,c*=v.y,u*=v.x,m*=v.y,a+=w,c+=I,f=X(g),g=Tn(f)}}return Nt({width:u,height:m,x:a,y:c})}function zn(t,e){const n=Vt(t).scrollLeft;return e?e.left+n:Me(ce(t)).left+n}function Yi(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:zn(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Pl(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ce(r),l=e?Ht(e.floating):!1;if(r===o||l&&s)return n;let a={scrollLeft:0,scrollTop:0},c=ie(1);const u=ie(0),m=oe(r);if((m||!m&&!s)&&((Ke(r)!=="body"||ht(o))&&(a=Vt(r)),oe(r))){const p=Me(r);c=je(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=o&&!m&&!s?Yi(o,a,!0):ie(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-a.scrollTop*c.y+u.y+h.y}}function Al(t){return Array.from(t.getClientRects())}function Nl(t){const e=ce(t),n=Vt(t),r=t.ownerDocument.body,i=G(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=G(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+zn(t);const l=-n.scrollTop;return te(r).direction==="rtl"&&(o+=G(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function Ol(t,e){const n=X(t),r=ce(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;const c=Bn();(!c||c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l,y:a}}function Ll(t,e){const n=Me(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=oe(t)?je(t):ie(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,a=i*s.x,c=r*s.y;return{width:o,height:l,x:a,y:c}}function Tr(t,e,n){let r;if(e==="viewport")r=Ol(t,n);else if(e==="document")r=Nl(ce(t));else if(q(e))r=Ll(e,n);else{const i=Ji(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Nt(r)}function Xi(t,e){const n=_e(t);return n===e||!q(n)||We(n)?!1:te(n).position==="fixed"||Xi(n,e)}function Ml(t,e){const n=e.get(t);if(n)return n;let r=ot(t,[],!1).filter(l=>q(l)&&Ke(l)!=="body"),i=null;const s=te(t).position==="fixed";let o=s?_e(t):t;for(;q(o)&&!We(o);){const l=te(o),a=Wn(o);!a&&l.position==="fixed"&&(i=null),(s?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ht(o)&&!a&&Xi(t,o))?r=r.filter(u=>u!==o):i=l,o=_e(o)}return e.set(t,r),r}function $l(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Ht(e)?[]:Ml(e,this._c):[].concat(n),r],l=o[0],a=o.reduce((c,u)=>{const m=Tr(e,u,i);return c.top=G(m.top,c.top),c.right=Oe(m.right,c.right),c.bottom=Oe(m.bottom,c.bottom),c.left=G(m.left,c.left),c},Tr(e,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Dl(t){const{width:e,height:n}=Ki(t);return{width:e,height:n}}function Fl(t,e,n){const r=oe(e),i=ce(e),s=n==="fixed",o=Me(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=ie(0);if(r||!r&&!s)if((Ke(e)!=="body"||ht(i))&&(l=Vt(e)),r){const h=Me(e,!0,s,e);a.x=h.x+e.clientLeft,a.y=h.y+e.clientTop}else i&&(a.x=zn(i));const c=i&&!r&&!s?Yi(i,l):ie(0),u=o.left+l.scrollLeft-a.x-c.x,m=o.top+l.scrollTop-a.y-c.y;return{x:u,y:m,width:o.width,height:o.height}}function tn(t){return te(t).position==="static"}function Sr(t,e){if(!oe(t)||te(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ce(t)===n&&(n=n.ownerDocument.body),n}function Qi(t,e){const n=X(t);if(Ht(t))return n;if(!oe(t)){let i=_e(t);for(;i&&!We(i);){if(q(i)&&!tn(i))return i;i=_e(i)}return n}let r=Sr(t,e);for(;r&&dl(r)&&tn(r);)r=Sr(r,e);return r&&We(r)&&tn(r)&&!Wn(r)?n:r||fl(t)||n}const jl=async function(t){const e=this.getOffsetParent||Qi,n=this.getDimensions,r=await n(t.floating);return{reference:Fl(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ul(t){return te(t).direction==="rtl"}const Hl={convertOffsetParentRelativeRectToViewportRelativeRect:Pl,getDocumentElement:ce,getClippingRect:$l,getOffsetParent:Qi,getElementRects:jl,getClientRects:Al,getDimensions:Dl,getScale:je,isElement:q,isRTL:Ul};function Zi(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Vl(t,e){let n=null,r;const i=ce(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const c=t.getBoundingClientRect(),{left:u,top:m,width:h,height:p}=c;if(l||e(),!h||!p)return;const f=Et(m),g=Et(i.clientWidth-(u+h)),v=Et(i.clientHeight-(m+p)),b=Et(u),w={rootMargin:-f+"px "+-g+"px "+-v+"px "+-b+"px",threshold:G(0,Oe(1,a))||1};let I=!0;function _(S){const x=S[0].intersectionRatio;if(x!==a){if(!I)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!Zi(c,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(_,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function Wl(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=Gn(t),u=i||s?[...c?ot(c):[],...ot(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const m=c&&l?Vl(c,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(b=>{let[E]=b;E&&E.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!a&&p.observe(c),p.observe(e));let f,g=a?Me(t):null;a&&v();function v(){const b=Me(t);g&&!Zi(g,b)&&n(),g=b,f=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(E=>{i&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),m==null||m(),(b=p)==null||b.disconnect(),p=null,a&&cancelAnimationFrame(f)}}const nn=Wt,Bl=Tl,Gl=Sl,zl=_l,ql=Cl,Kl=(t,e,n)=>{const r=new Map,i={platform:Hl,...n},s={...i.platform,_c:r};return Il(t,e,{...i,platform:s})};var xt=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Ot(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ot(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Ot(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function es(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cr(t,e){const n=es(t);return Math.round(e*n)/n}function rn(t){const e=d.useRef(t);return xt(()=>{e.current=t}),e}function Jl(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:a,open:c}=t,[u,m]=d.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=d.useState(r);Ot(h,r)||p(r);const[f,g]=d.useState(null),[v,b]=d.useState(null),E=d.useCallback(P=>{P!==S.current&&(S.current=P,g(P))},[]),w=d.useCallback(P=>{P!==x.current&&(x.current=P,b(P))},[]),I=s||f,_=o||v,S=d.useRef(null),x=d.useRef(null),k=d.useRef(u),D=a!=null,N=rn(a),R=rn(i),F=rn(c),M=d.useCallback(()=>{if(!S.current||!x.current)return;const P={placement:e,strategy:n,middleware:h};R.current&&(P.platform=R.current),Kl(S.current,x.current,P).then(T=>{const U={...T,isPositioned:F.current!==!1};$.current&&!Ot(k.current,U)&&(k.current=U,re.flushSync(()=>{m(U)}))})},[h,e,n,R,F]);xt(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(P=>({...P,isPositioned:!1})))},[c]);const $=d.useRef(!1);xt(()=>($.current=!0,()=>{$.current=!1}),[]),xt(()=>{if(I&&(S.current=I),_&&(x.current=_),I&&_){if(N.current)return N.current(I,_,M);M()}},[I,_,M,N,D]);const J=d.useMemo(()=>({reference:S,floating:x,setReference:E,setFloating:w}),[E,w]),j=d.useMemo(()=>({reference:I,floating:_}),[I,_]),W=d.useMemo(()=>{const P={position:n,left:0,top:0};if(!j.floating)return P;const T=Cr(j.floating,u.x),U=Cr(j.floating,u.y);return l?{...P,transform:"translate("+T+"px, "+U+"px)",...es(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:T,top:U}},[n,l,j.floating,u.x,u.y]);return d.useMemo(()=>({...u,update:M,refs:J,elements:j,floatingStyles:W}),[u,M,J,j,W])}const ts=(t,e)=>({...Bl(t),options:[t,e]}),Yl=(t,e)=>({...Gl(t),options:[t,e]}),Xl=(t,e)=>({...zl(t),options:[t,e]}),Ql=(t,e)=>({...ql(t),options:[t,e]}),ns={...hn},Zl=ns.useInsertionEffect,ec=Zl||(t=>t());function rs(t){const e=d.useRef(()=>{});return ec(()=>{e.current=t}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var Cn=typeof document<"u"?d.useLayoutEffect:d.useEffect;let Rr=!1,tc=0;const kr=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tc++;function nc(){const[t,e]=d.useState(()=>Rr?kr():void 0);return Cn(()=>{t==null&&e(kr())},[]),d.useEffect(()=>{Rr=!0},[]),t}const rc=ns.useId,ic=rc||nc;function sc(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const oc=d.createContext(null),ac=d.createContext(null),lc=()=>{var t;return((t=d.useContext(oc))==null?void 0:t.id)||null},cc=()=>d.useContext(ac),uc="data-floating-ui-focusable";function dc(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=ic(),s=d.useRef({}),[o]=d.useState(()=>sc()),l=lc()!=null,[a,c]=d.useState(r.reference),u=rs((p,f,g)=>{s.current.openEvent=p?f:void 0,o.emit("openchange",{open:p,event:f,reason:g,nested:l}),n==null||n(p,f,g)}),m=d.useMemo(()=>({setPositionReference:c}),[]),h=d.useMemo(()=>({reference:a||r.reference||null,floating:r.floating||null,domReference:r.reference}),[a,r.reference,r.floating]);return d.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:h,events:o,floatingId:i,refs:m}),[e,u,h,o,i,m])}function fc(t){t===void 0&&(t={});const{nodeId:e}=t,n=dc({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=d.useState(null),[l,a]=d.useState(null),u=(i==null?void 0:i.domReference)||s,m=d.useRef(null),h=cc();Cn(()=>{u&&(m.current=u)},[u]);const p=Jl({...t,elements:{...i,...l&&{reference:l}}}),f=d.useCallback(w=>{const I=q(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;a(I),p.refs.setReference(I)},[p.refs]),g=d.useCallback(w=>{(q(w)||w===null)&&(m.current=w,o(w)),(q(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!q(w))&&p.refs.setReference(w)},[p.refs]),v=d.useMemo(()=>({...p.refs,setReference:g,setPositionReference:f,domReference:m}),[p.refs,g,f]),b=d.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),E=d.useMemo(()=>({...p,...r,refs:v,elements:b,nodeId:e}),[p,v,b,e,r]);return Cn(()=>{r.dataRef.current.floatingContext=E;const w=h==null?void 0:h.nodesRef.current.find(I=>I.id===e);w&&(w.context=E)}),d.useMemo(()=>({...p,context:E,refs:v,elements:b}),[p,v,b,E])}const Pr="active",Ar="selected";function sn(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[Pr]:o,[Ar]:l,...a}=t;s=a}return{...n==="floating"&&{tabIndex:-1,[uc]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(a=>{let[c,u]=a;if(!(i&&[Pr,Ar].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var m;(m=r.get(c))==null||m.push(u),o[c]=function(){for(var h,p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(v=>v(...f)).find(v=>v!==void 0)}}}else o[c]=u}),o),{})}}function hc(t){t===void 0&&(t=[]);const e=t.map(l=>l==null?void 0:l.reference),n=t.map(l=>l==null?void 0:l.floating),r=t.map(l=>l==null?void 0:l.item),i=d.useCallback(l=>sn(l,t,"reference"),e),s=d.useCallback(l=>sn(l,t,"floating"),n),o=d.useCallback(l=>sn(l,t,"item"),r);return d.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Nr(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const pc=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:l=4,referenceOverflowThreshold:a=0,scrollRef:c,...u}=Je(t,e),{rects:m,elements:{floating:h}}=e,p=n.current[o],f=(c==null?void 0:c.current)||h,g=h.clientTop||f.clientTop,v=h.clientTop!==0,b=f.clientTop!==0,E=h===f;if(!p)return{};const w={...e,...await ts(-p.offsetTop-h.clientTop-m.reference.height/2-p.offsetHeight/2-s).fn(e)},I=await nn(Nr(w,f.scrollHeight+g+h.clientTop),u),_=await nn(w,{...u,elementContext:"reference"}),S=G(0,I.top),x=w.y+S,N=(f.scrollHeight>f.clientHeight?R=>R:at)(G(0,f.scrollHeight+(v&&E||b?g*2:0)-S-G(0,I.bottom)));if(f.style.maxHeight=N+"px",f.scrollTop=S,i){const R=f.offsetHeight<p.offsetHeight*Oe(l,n.current.length)-1||_.top>=-a||_.bottom>=-a;re.flushSync(()=>i(R))}return r&&(r.current=await nn(Nr({...w,y:x},f.offsetHeight+g+h.clientTop),u)),{y:x}}});function mc(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:s,scrollRef:o,onChange:l}=e,a=rs(l),c=d.useRef(!1),u=d.useRef(null),m=d.useRef(null);d.useEffect(()=>{if(!i)return;function p(g){if(g.ctrlKey||!f||s.current==null)return;const v=g.deltaY,b=s.current.top>=-.5,E=s.current.bottom>=-.5,w=f.scrollHeight-f.clientHeight,I=v<0?-1:1,_=v<0?"max":"min";f.scrollHeight<=f.clientHeight||(!b&&v>0||!E&&v<0?(g.preventDefault(),re.flushSync(()=>{a(S=>S+Math[_](v,w*I))})):/firefox/i.test(hl())&&(f.scrollTop+=v))}const f=(o==null?void 0:o.current)||r.floating;if(n&&f)return f.addEventListener("wheel",p),requestAnimationFrame(()=>{u.current=f.scrollTop,s.current!=null&&(m.current={...s.current})}),()=>{u.current=null,m.current=null,f.removeEventListener("wheel",p)}},[i,n,r.floating,s,o,a]);const h=d.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const p=(o==null?void 0:o.current)||r.floating;if(!(!s.current||!p||!c.current)){if(u.current!==null){const f=p.scrollTop-u.current;(s.current.bottom<-.5&&f<-1||s.current.top<-.5&&f>1)&&re.flushSync(()=>a(g=>g+f))}requestAnimationFrame(()=>{u.current=p.scrollTop})}}}),[r.floating,a,s,o]);return d.useMemo(()=>i?{floating:h}:{},[i,h])}let Ye=d.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Ye.displayName="FloatingContext";let qn=d.createContext(null);qn.displayName="PlacementContext";function gc(t){return d.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function vc(){return d.useContext(Ye).setReference}function yc(){return d.useContext(Ye).getReferenceProps}function bc(){let{getFloatingProps:t,slot:e}=d.useContext(Ye);return d.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function wc(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=d.useContext(qn),n=d.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var o;return(o=s==null?void 0:s.outerHTML)!=null?o:s})]);O(()=>{e==null||e(n??null)},[e,n]);let r=d.useContext(Ye);return d.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let Or=4;function Ec({children:t,enabled:e=!0}){let[n,r]=d.useState(null),[i,s]=d.useState(0),o=d.useRef(null),[l,a]=d.useState(null);Ic(l);let c=e&&n!==null&&l!==null,{to:u="bottom",gap:m=0,offset:h=0,padding:p=0,inner:f}=_c(n,l),[g,v="center"]=u.split(" ");O(()=>{c&&s(0)},[c]);let{refs:b,floatingStyles:E,context:w}=fc({open:c,placement:g==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${g}`:`${g}-${v}`,strategy:"absolute",transform:!1,middleware:[ts({mainAxis:g==="selection"?0:m,crossAxis:h}),Yl({padding:p}),g!=="selection"&&Xl({padding:p}),g==="selection"&&f?pc({...f,padding:p,overflowRef:o,offset:i,minItemsVisible:Or,referenceOverflowThreshold:p,onFallbackChange(R){var F,M;if(!R)return;let $=w.elements.floating;if(!$)return;let J=parseFloat(getComputedStyle($).scrollPaddingBottom)||0,j=Math.min(Or,$.childElementCount),W=0,P=0;for(let T of(M=(F=w.elements.floating)==null?void 0:F.childNodes)!=null?M:[])if(T instanceof HTMLElement){let U=T.offsetTop,ge=U+T.clientHeight+J,ve=$.scrollTop,H=ve+$.clientHeight;if(U>=ve&&ge<=H)j--;else{P=Math.max(0,Math.min(ge,H)-Math.max(U,ve)),W=T.clientHeight;break}}j>=1&&s(T=>{let U=W*j-P+J;return T>=U?T:U})}}):null,Ql({padding:p,apply({availableWidth:R,availableHeight:F,elements:M}){Object.assign(M.floating.style,{overflow:"auto",maxWidth:`${R}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${F}px)`})}})].filter(Boolean),whileElementsMounted:Wl}),[I=g,_=v]=w.placement.split("-");g==="selection"&&(I="selection");let S=d.useMemo(()=>({anchor:[I,_].filter(Boolean).join(" ")}),[I,_]),x=mc(w,{overflowRef:o,onChange:s}),{getReferenceProps:k,getFloatingProps:D}=hc([x]),N=A(R=>{a(R),b.setFloating(R)});return d.createElement(qn.Provider,{value:r},d.createElement(Ye.Provider,{value:{setFloating:N,setReference:b.setReference,styles:E,getReferenceProps:k,getFloatingProps:D,slot:S}},t))}function Ic(t){O(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function _c(t,e){var n,r,i;let s=on((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),o=on((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),l=on((i=t==null?void 0:t.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:o,padding:l}}function on(t,e,n=void 0){let r=ft(),i=A((a,c)=>{if(a==null)return[n,null];if(typeof a=="number")return[a,null];if(typeof a=="string"){if(!c)return[n,null];let u=Lr(a,c);return[u,m=>{let h=is(a);{let p=h.map(f=>window.getComputedStyle(c).getPropertyValue(f));r.requestAnimationFrame(function f(){r.nextFrame(f);let g=!1;for(let[b,E]of h.entries()){let w=window.getComputedStyle(c).getPropertyValue(E);if(p[b]!==w){p[b]=w,g=!0;break}}if(!g)return;let v=Lr(a,c);u!==v&&(m(v),u=v)})}return r.dispose}]}return[n,null]}),s=d.useMemo(()=>i(t,e)[0],[t,e]),[o=s,l]=d.useState();return O(()=>{let[a,c]=i(t,e);if(l(a),!!c)return c(l)},[t,e]),o}function is(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...is(i)]:[r]}return[]}function Lr(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let Kn=d.createContext(null);Kn.displayName="OpenClosedContext";var Z=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Z||{});function Jn(){return d.useContext(Kn)}function ss({value:t,children:e}){return L.createElement(Kn.Provider,{value:t},e)}function xc(t){throw new Error("Unexpected object: "+t)}var z=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(z||{});function an(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1;switch(t.focus){case 0:{for(let s=0;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 1:{i===-1&&(i=n.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 2:{for(let s=i+1;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 3:{for(let s=n.length-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 4:{for(let s=0;s<n.length;++s)if(e.resolveId(n[s],s,n)===t.id)return s;return r}case 5:return null;default:xc(t)}}function Tc(t){let e=A(t),n=d.useRef(!1);d.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ri(()=>{n.current&&e()})}),[e])}function Sc(){let t=typeof document>"u";return"useSyncExternalStore"in hn?(e=>e.useSyncExternalStore)(hn)(()=>()=>{},()=>!1,()=>!t):!1}function Yn(){let t=Sc(),[e,n]=d.useState(Pe.isHandoffComplete);return e&&Pe.isHandoffComplete===!1&&n(!1),d.useEffect(()=>{e!==!0&&n(!0)},[e]),d.useEffect(()=>Pe.handoff(),[]),t?!1:e}let Cc=d.createContext(!1);function Rc(){return d.useContext(Cc)}function kc(t){let e=Rc(),n=d.useContext(as),[r,i]=d.useState(()=>{var s;if(!e&&n!==null)return(s=n.current)!=null?s:null;if(Pe.isServer)return null;let o=t==null?void 0:t.getElementById("headlessui-portal-root");if(o)return o;if(t===null)return null;let l=t.createElement("div");return l.setAttribute("id","headlessui-portal-root"),t.body.appendChild(l)});return d.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),d.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),r}let os=d.Fragment,Pc=K(function(t,e){let{ownerDocument:n=null,...r}=t,i=d.useRef(null),s=ne(Ea(p=>{i.current=p}),e),o=xn(i),l=n??o,a=kc(l),[c]=d.useState(()=>{var p;return Pe.isServer?null:(p=l==null?void 0:l.createElement("div"))!=null?p:null}),u=d.useContext(Lc),m=Yn();O(()=>{!a||!c||a.contains(c)||(c.setAttribute("data-headlessui-portal",""),a.appendChild(c))},[a,c]),O(()=>{if(c&&u)return u.register(c)},[u,c]),Tc(()=>{var p;!a||!c||(c instanceof Node&&a.contains(c)&&a.removeChild(c),a.childNodes.length<=0&&((p=a.parentElement)==null||p.removeChild(a)))});let h=Y();return m?!a||!c?null:re.createPortal(h({ourProps:{ref:s},theirProps:r,slot:{},defaultTag:os,name:"Portal"}),c):null});function Ac(t,e){let n=ne(e),{enabled:r=!0,ownerDocument:i,...s}=t,o=Y();return r?L.createElement(Pc,{...s,ownerDocument:i,ref:n}):o({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:os,name:"Portal"})}let Nc=d.Fragment,as=d.createContext(null);function Oc(t,e){let{target:n,...r}=t,i={ref:ne(e)},s=Y();return L.createElement(as.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:Nc,name:"Popover.Group"}))}let Lc=d.createContext(null),Mc=K(Ac),$c=K(Oc),Dc=Object.assign(Mc,{Group:$c});function Fc(){let t=d.useRef(!1);return O(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ls(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:us)!==d.Fragment||L.Children.count(t.children)===1}let Bt=d.createContext(null);Bt.displayName="TransitionContext";var jc=(t=>(t.Visible="visible",t.Hidden="hidden",t))(jc||{});function Uc(){let t=d.useContext(Bt);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Hc(){let t=d.useContext(Gt);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Gt=d.createContext(null);Gt.displayName="NestingContext";function zt(t){return"children"in t?zt(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function cs(t,e){let n=qe(t),r=d.useRef([]),i=Fc(),s=ft(),o=A((p,f=Ie.Hidden)=>{let g=r.current.findIndex(({el:v})=>v===p);g!==-1&&(De(f,{[Ie.Unmount](){r.current.splice(g,1)},[Ie.Hidden](){r.current[g].state="hidden"}}),s.microTask(()=>{var v;!zt(r)&&i.current&&((v=n.current)==null||v.call(n))}))}),l=A(p=>{let f=r.current.find(({el:g})=>g===p);return f?f.state!=="visible"&&(f.state="visible"):r.current.push({el:p,state:"visible"}),()=>o(p,Ie.Unmount)}),a=d.useRef([]),c=d.useRef(Promise.resolve()),u=d.useRef({enter:[],leave:[]}),m=A((p,f,g)=>{a.current.splice(0),e&&(e.chains.current[f]=e.chains.current[f].filter(([v])=>v!==p)),e==null||e.chains.current[f].push([p,new Promise(v=>{a.current.push(v)})]),e==null||e.chains.current[f].push([p,new Promise(v=>{Promise.all(u.current[f].map(([b,E])=>E)).then(()=>v())})]),f==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(f)):g(f)}),h=A((p,f,g)=>{Promise.all(u.current[f].splice(0).map(([v,b])=>b)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>g(f))});return d.useMemo(()=>({children:r,register:l,unregister:o,onStart:m,onStop:h,wait:c,chains:u}),[l,o,r,m,h,u,c])}let us=d.Fragment,ds=Pt.RenderStrategy;function Vc(t,e){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:o,beforeLeave:l,afterLeave:a,enter:c,enterFrom:u,enterTo:m,entered:h,leave:p,leaveFrom:f,leaveTo:g,...v}=t,[b,E]=d.useState(null),w=d.useRef(null),I=ls(t),_=ne(...I?[w,e,E]:e===null?[]:[e]),S=(n=v.unmount)==null||n?Ie.Unmount:Ie.Hidden,{show:x,appear:k,initial:D}=Uc(),[N,R]=d.useState(x?"visible":"hidden"),F=Hc(),{register:M,unregister:$}=F;O(()=>M(w),[M,w]),O(()=>{if(S===Ie.Hidden&&w.current){if(x&&N!=="visible"){R("visible");return}return De(N,{hidden:()=>$(w),visible:()=>M(w)})}},[N,w,M,$,x,S]);let J=Yn();O(()=>{if(I&&J&&N==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,N,J,I]);let j=D&&!k,W=k&&x&&D,P=d.useRef(!1),T=cs(()=>{P.current||(R("hidden"),$(w))},F),U=A(Xt=>{P.current=!0;let yt=Xt?"enter":"leave";T.onStart(w,yt,Ze=>{Ze==="enter"?s==null||s():Ze==="leave"&&(l==null||l())})}),ge=A(Xt=>{let yt=Xt?"enter":"leave";P.current=!1,T.onStop(w,yt,Ze=>{Ze==="enter"?o==null||o():Ze==="leave"&&(a==null||a())}),yt==="leave"&&!zt(T)&&(R("hidden"),$(w))});d.useEffect(()=>{I&&i||(U(x),ge(x))},[x,I,i]);let ve=!(!i||!I||!J||j),[,H]=Vi(ve,b,x,{start:U,end:ge}),Gs=Se({ref:_,className:((r=wn(v.className,W&&c,W&&u,H.enter&&c,H.enter&&H.closed&&u,H.enter&&!H.closed&&m,H.leave&&p,H.leave&&!H.closed&&f,H.leave&&H.closed&&g,!H.transition&&x&&h))==null?void 0:r.trim())||void 0,...Hi(H)}),Qe=0;N==="visible"&&(Qe|=Z.Open),N==="hidden"&&(Qe|=Z.Closed),H.enter&&(Qe|=Z.Opening),H.leave&&(Qe|=Z.Closing);let zs=Y();return L.createElement(Gt.Provider,{value:T},L.createElement(ss,{value:Qe},zs({ourProps:Gs,theirProps:v,defaultTag:us,features:ds,visible:N==="visible",name:"Transition.Child"})))}function Wc(t,e){let{show:n,appear:r=!1,unmount:i=!0,...s}=t,o=d.useRef(null),l=ls(t),a=ne(...l?[o,e]:e===null?[]:[e]);Yn();let c=Jn();if(n===void 0&&c!==null&&(n=(c&Z.Open)===Z.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,m]=d.useState(n?"visible":"hidden"),h=cs(()=>{n||m("hidden")}),[p,f]=d.useState(!0),g=d.useRef([n]);O(()=>{p!==!1&&g.current[g.current.length-1]!==n&&(g.current.push(n),f(!1))},[g,n]);let v=d.useMemo(()=>({show:n,appear:r,initial:p}),[n,r,p]);O(()=>{n?m("visible"):!zt(h)&&o.current!==null&&m("hidden")},[n,h]);let b={unmount:i},E=A(()=>{var _;p&&f(!1),(_=t.beforeEnter)==null||_.call(t)}),w=A(()=>{var _;p&&f(!1),(_=t.beforeLeave)==null||_.call(t)}),I=Y();return L.createElement(Gt.Provider,{value:h},L.createElement(Bt.Provider,{value:v},I({ourProps:{...b,as:d.Fragment,children:L.createElement(fs,{ref:a,...b,...s,beforeEnter:E,beforeLeave:w})},theirProps:{},defaultTag:d.Fragment,features:ds,visible:u==="visible",name:"Transition"})))}function Bc(t,e){let n=d.useContext(Bt)!==null,r=Jn()!==null;return L.createElement(L.Fragment,null,!n&&r?L.createElement(Rn,{ref:e,...t}):L.createElement(fs,{ref:e,...t}))}let Rn=K(Wc),fs=K(Vc),Gc=K(Bc),zc=Object.assign(Rn,{Child:Gc,Root:Rn});function qc(t,e){let n=d.useRef({left:0,top:0});if(O(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(n.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let r=e.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let Mr=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function $r(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let l of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),s=!0;let o=s?(n=i.innerText)!=null?n:"":r;return Mr.test(o)&&(o=o.replace(Mr,"")),o}function Kc(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let s=document.getElementById(i);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():$r(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return $r(t).trim()}function Jc(t){let e=d.useRef(""),n=d.useRef("");return A(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let s=Kc(r).trim().toLowerCase();return e.current=i,n.current=s,s})}var Yc=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Yc||{}),Xc=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Xc||{}),Qc=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t))(Qc||{});function ln(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=ji(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let Zc={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},0(t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},2:(t,e)=>{var n,r,i,s,o;if(t.menuState===1)return t;let l={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===z.Nothing)return{...l,activeItemIndex:null};if(e.focus===z.Specific)return{...l,activeItemIndex:t.items.findIndex(u=>u.id===e.id)};if(e.focus===z.Previous){let u=t.activeItemIndex;if(u!==null){let m=t.items[u].dataRef.current.domRef,h=an(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(h!==null){let p=t.items[h].dataRef.current.domRef;if(((r=m.current)==null?void 0:r.previousElementSibling)===p.current||((i=p.current)==null?void 0:i.previousElementSibling)===null)return{...l,activeItemIndex:h}}}}else if(e.focus===z.Next){let u=t.activeItemIndex;if(u!==null){let m=t.items[u].dataRef.current.domRef,h=an(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(h!==null){let p=t.items[h].dataRef.current.domRef;if(((s=m.current)==null?void 0:s.nextElementSibling)===p.current||((o=p.current)==null?void 0:o.nextElementSibling)===null)return{...l,activeItemIndex:h}}}}let a=ln(t),c=an(e,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...l,...a,activeItemIndex:c}},3:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(o=>{var l;return((l=o.dataRef.current.textValue)==null?void 0:l.startsWith(r))&&!o.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let n=ln(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},6:(t,e)=>{let n=ln(t,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element}},Xn=d.createContext(null);Xn.displayName="MenuContext";function qt(t){let e=d.useContext(Xn);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qt),n}return e}function eu(t,e){return De(e.type,Zc,t,e)}let tu=d.Fragment;function nu(t,e){let{__demoMode:n=!1,...r}=t,i=d.useReducer(eu,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:o,buttonElement:l},a]=i,c=ne(e);Ja(s===0,[l,o],(f,g)=>{a({type:1}),Vn(g,Hn.Loose)||(f.preventDefault(),l==null||l.focus())});let u=A(()=>{a({type:1})}),m=d.useMemo(()=>({open:s===0,close:u}),[s,u]),h={ref:c},p=Y();return L.createElement(Ec,null,L.createElement(Xn.Provider,{value:i},L.createElement(ss,{value:De(s,{0:Z.Open,1:Z.Closed})},p({ourProps:h,theirProps:r,slot:m,defaultTag:tu,name:"Menu"}))))}let ru="button";function iu(t,e){var n;let r=d.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:s=!1,autoFocus:o=!1,...l}=t,[a,c]=qt("Menu.Button"),u=yc(),m=ne(e,vc(),A(x=>c({type:7,element:x}))),h=A(x=>{switch(x.key){case B.Space:case B.Enter:case B.ArrowDown:x.preventDefault(),x.stopPropagation(),re.flushSync(()=>c({type:0})),c({type:2,focus:z.First});break;case B.ArrowUp:x.preventDefault(),x.stopPropagation(),re.flushSync(()=>c({type:0})),c({type:2,focus:z.Last});break}}),p=A(x=>{switch(x.key){case B.Space:x.preventDefault();break}}),f=A(x=>{var k;if(ba(x.currentTarget))return x.preventDefault();s||(a.menuState===0?(re.flushSync(()=>c({type:1})),(k=a.buttonElement)==null||k.focus({preventScroll:!0})):(x.preventDefault(),c({type:0})))}),{isFocusVisible:g,focusProps:v}=sa({autoFocus:o}),{isHovered:b,hoverProps:E}=ia({isDisabled:s}),{pressed:w,pressProps:I}=da({disabled:s}),_=d.useMemo(()=>({open:a.menuState===0,active:w||a.menuState===0,disabled:s,hover:b,focus:g,autofocus:o}),[a,b,g,w,s,o]),S=Ai(u(),{ref:m,id:i,type:Ya(t,a.buttonElement),"aria-haspopup":"menu","aria-controls":(n=a.itemsElement)==null?void 0:n.id,"aria-expanded":a.menuState===0,disabled:s||void 0,autoFocus:o,onKeyDown:h,onKeyUp:p,onClick:f},v,E,I);return Y()({ourProps:S,theirProps:l,slot:_,defaultTag:ru,name:"Menu.Button"})}let su="div",ou=Pt.RenderStrategy|Pt.Static;function au(t,e){var n,r;let i=d.useId(),{id:s=`headlessui-menu-items-${i}`,anchor:o,portal:l=!1,modal:a=!0,transition:c=!1,...u}=t,m=gc(o),[h,p]=qt("Menu.Items"),[f,g]=wc(m),v=bc(),[b,E]=d.useState(null),w=ne(e,m?f:null,A(T=>p({type:8,element:T})),E),I=xn(h.buttonElement),_=xn(h.itemsElement);m&&(l=!0);let S=Jn(),[x,k]=Vi(c,b,S!==null?(S&Z.Open)===Z.Open:h.menuState===0);Ma(x,h.buttonElement,()=>{p({type:1})});let D=h.__demoMode?!1:a&&h.menuState===0;nl(D,_);let N=h.__demoMode?!1:a&&h.menuState===0;La(N,{allowed:d.useCallback(()=>[h.buttonElement,h.itemsElement],[h.buttonElement,h.itemsElement])});let R=h.menuState!==0,F=qc(R,h.buttonElement)?!1:x;d.useEffect(()=>{let T=h.itemsElement;T&&h.menuState===0&&T!==(_==null?void 0:_.activeElement)&&T.focus({preventScroll:!0})},[h.menuState,h.itemsElement,_]),ul(h.menuState===0,{container:h.itemsElement,accept(T){return T.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:T.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(T){T.setAttribute("role","none")}});let M=ft(),$=A(T=>{var U,ge,ve;switch(M.dispose(),T.key){case B.Space:if(h.searchQuery!=="")return T.preventDefault(),T.stopPropagation(),p({type:3,value:T.key});case B.Enter:if(T.preventDefault(),T.stopPropagation(),p({type:1}),h.activeItemIndex!==null){let{dataRef:H}=h.items[h.activeItemIndex];(ge=(U=H.current)==null?void 0:U.domRef.current)==null||ge.click()}Fi(h.buttonElement);break;case B.ArrowDown:return T.preventDefault(),T.stopPropagation(),p({type:2,focus:z.Next});case B.ArrowUp:return T.preventDefault(),T.stopPropagation(),p({type:2,focus:z.Previous});case B.Home:case B.PageUp:return T.preventDefault(),T.stopPropagation(),p({type:2,focus:z.First});case B.End:case B.PageDown:return T.preventDefault(),T.stopPropagation(),p({type:2,focus:z.Last});case B.Escape:T.preventDefault(),T.stopPropagation(),re.flushSync(()=>p({type:1})),(ve=h.buttonElement)==null||ve.focus({preventScroll:!0});break;case B.Tab:T.preventDefault(),T.stopPropagation(),re.flushSync(()=>p({type:1})),Ba(h.buttonElement,T.shiftKey?_n.Previous:_n.Next);break;default:T.key.length===1&&(p({type:3,value:T.key}),M.setTimeout(()=>p({type:4}),350));break}}),J=A(T=>{switch(T.key){case B.Space:T.preventDefault();break}}),j=d.useMemo(()=>({open:h.menuState===0}),[h.menuState]),W=Ai(m?v():{},{"aria-activedescendant":h.activeItemIndex===null||(n=h.items[h.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=h.buttonElement)==null?void 0:r.id,id:s,onKeyDown:$,onKeyUp:J,role:"menu",tabIndex:h.menuState===0?0:void 0,ref:w,style:{...u.style,...g,"--button-width":Aa(h.buttonElement,!0).width},...Hi(k)}),P=Y();return L.createElement(Dc,{enabled:l?t.static||x:!1,ownerDocument:I},P({ourProps:W,theirProps:u,slot:j,defaultTag:su,features:ou,visible:F,name:"Menu.Items"}))}let lu=d.Fragment;function cu(t,e){let n=d.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...s}=t,[o,l]=qt("Menu.Item"),a=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,c=d.useRef(null),u=ne(e,c);O(()=>{if(!o.__demoMode&&o.menuState===0&&a&&o.activationTrigger!==0)return le().requestAnimationFrame(()=>{var R,F;(F=(R=c.current)==null?void 0:R.scrollIntoView)==null||F.call(R,{block:"nearest"})})},[o.__demoMode,c,a,o.menuState,o.activationTrigger,o.activeItemIndex]);let m=Jc(c),h=d.useRef({disabled:i,domRef:c,get textValue(){return m()}});O(()=>{h.current.disabled=i},[h,i]),O(()=>(l({type:5,id:r,dataRef:h}),()=>l({type:6,id:r})),[h,r]);let p=A(()=>{l({type:1})}),f=A(R=>{if(i)return R.preventDefault();l({type:1}),Fi(o.buttonElement)}),g=A(()=>{if(i)return l({type:2,focus:z.Nothing});l({type:2,focus:z.Specific,id:r})}),v=rl(),b=A(R=>{v.update(R),!i&&(a||l({type:2,focus:z.Specific,id:r,trigger:0}))}),E=A(R=>{v.wasMoved(R)&&(i||a||l({type:2,focus:z.Specific,id:r,trigger:0}))}),w=A(R=>{v.wasMoved(R)&&(i||a&&l({type:2,focus:z.Nothing}))}),[I,_]=Li(),[S,x]=Ia(),k=d.useMemo(()=>({active:a,focus:a,disabled:i,close:p}),[a,i,p]),D={id:r,ref:u,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":S,disabled:void 0,onClick:f,onFocus:g,onPointerEnter:b,onMouseEnter:b,onPointerMove:E,onMouseMove:E,onPointerLeave:w,onMouseLeave:w},N=Y();return L.createElement(_,null,L.createElement(x,null,N({ourProps:D,theirProps:s,slot:k,defaultTag:lu,name:"Menu.Item"})))}let uu="div";function du(t,e){let[n,r]=Li(),i=t,s={ref:e,"aria-labelledby":n,role:"group"},o=Y();return L.createElement(r,null,o({ourProps:s,theirProps:i,slot:{},defaultTag:uu,name:"Menu.Section"}))}let fu="header";function hu(t,e){let n=d.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=t,s=jn();O(()=>s.register(r),[r,s.register]);let o={id:r,ref:e,role:"presentation",...s.props};return Y()({ourProps:o,theirProps:i,slot:{},defaultTag:fu,name:"Menu.Heading"})}let pu="div";function mu(t,e){let n=t,r={ref:e,role:"separator"};return Y()({ourProps:r,theirProps:n,slot:{},defaultTag:pu,name:"Menu.Separator"})}let gu=K(nu),vu=K(iu),yu=K(au),bu=K(cu),wu=K(du),Eu=K(hu),Iu=K(mu),It=Object.assign(gu,{Button:vu,Items:yu,Item:bu,Section:wu,Heading:Eu,Separator:Iu});const _u=[{name:"Tableau de Bord",to:"/dashboard",icon:ei},{name:"Tickets SAP",to:"/tickets-sap",icon:ti},{name:"Envois CTN",to:"/envois-ctn",icon:ni},{name:"Recherche Articles",to:"/articles",icon:Js}],xu=[{name:"Kezia",to:"/installations/kezia",disabled:!1,icon:bt},{name:"CHR",to:"#",disabled:!0,icon:bt},{name:"HACCP",to:"#",disabled:!0,icon:bt},{name:"Tabac",to:"#",disabled:!0,icon:bt}],cn={name:"Admin",to:"/admin",icon:ri},Tu="https://www.jdc.fr/images/logo_jdc_blanc.svg",Su=({user:t,profile:e,onToggleMobileMenu:n,onLoginClick:r,loadingAuth:i})=>{var u,m;const s="text-jdc-yellow",o="text-jdc-gray-300 hover:text-jdc-yellow transition-colors",l=`${o} font-medium flex items-center transition-transform duration-200 ease-in-out hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75`,a="group flex w-full items-center rounded-md px-3 py-2 text-sm",c=!i&&((u=e==null?void 0:e.role)==null?void 0:u.toLowerCase())==="admin";return y.jsx("header",{className:"bg-jdc-blue-dark border-b border-jdc-gray-800 py-3 px-4 md:px-6 sticky top-0 z-40",children:y.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto",children:[y.jsxs("div",{className:"flex items-center space-x-4 md:space-x-6",children:[y.jsx(ai,{to:t?"/dashboard":"/",className:"flex-shrink-0",children:y.jsx("img",{src:Tu,alt:"JDC Logo",className:"h-8 w-auto"})}),y.jsx("button",{onClick:n,className:"md:hidden text-jdc-gray-300 hover:text-white focus:outline-none","aria-label":"Ouvrir le menu",children:y.jsx(V,{icon:Ks,size:"lg"})}),t&&!i&&y.jsxs("nav",{className:"hidden md:flex space-x-6 items-center",children:[_u.map(h=>y.jsxs(nt,{to:h.to,className:({isActive:p})=>`${p?s:o} font-medium flex items-center transition-transform duration-200 ease-in-out hover:scale-105`,prefetch:"intent",children:[y.jsx(V,{icon:h.icon,className:"mr-1.5"}),h.name]},h.to)),y.jsxs(It,{as:"div",className:"relative inline-block text-left",children:[y.jsx("div",{children:y.jsxs(It.Button,{className:l,children:[y.jsx("span",{children:"Installations"}),y.jsx(V,{icon:Ys,className:"ml-1.5 h-4 w-4","aria-hidden":"true"})]})}),y.jsx(zc,{as:d.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:y.jsx(It.Items,{className:"absolute left-0 mt-2 w-48 origin-top-left divide-y divide-jdc-gray-700 rounded-md bg-jdc-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:y.jsx("div",{className:"px-1 py-1 ",children:xu.map(h=>y.jsx(It.Item,{disabled:h.disabled,children:({active:p,disabled:f})=>y.jsxs(nt,{to:h.to,className:`${a} ${p?"bg-jdc-blue text-white":"text-jdc-gray-300"} ${f?"opacity-50 cursor-not-allowed":"hover:bg-jdc-gray-700 hover:text-white"}`,onClick:g=>{f&&g.preventDefault()},"aria-disabled":f,children:[y.jsx(V,{icon:h.icon,className:"mr-2 h-5 w-5","aria-hidden":"true"}),h.name,f&&y.jsx("span",{className:"text-xs ml-1 opacity-75",children:"(Bientt)"})]})},h.name))})})})]}),c&&y.jsxs(nt,{to:cn.to,className:({isActive:h})=>`${h?s:o} font-medium flex items-center transition-transform duration-200 ease-in-out hover:scale-105`,children:[y.jsx(V,{icon:cn.icon,className:"mr-1.5"}),cn.name]})]}),i&&y.jsx("div",{className:"hidden md:block text-jdc-gray-400 text-sm",children:"Chargement..."})]}),y.jsx("div",{className:"flex items-center space-x-3",children:i?y.jsx("div",{className:"h-8 w-20 bg-jdc-gray-700 rounded animate-pulse"}):t?y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:"text-jdc-gray-300 hidden sm:inline",title:t.email??"",children:[y.jsx(V,{icon:ii,className:"mr-1"}),(e==null?void 0:e.displayName)||t.displayName||((m=t.email)==null?void 0:m.split("@")[0])||"Utilisateur"]}),y.jsx(cr,{method:"post",action:"/logout",children:y.jsxs(tt,{type:"submit",variant:"secondary",size:"sm",title:"Dconnexion",children:[y.jsx(V,{icon:Xs}),y.jsx("span",{className:"sr-only sm:not-sr-only sm:ml-1",children:"Dconnexion"})]})})]}):y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(tt,{variant:"primary",size:"sm",onClick:r,leftIcon:y.jsx(V,{icon:si}),children:"Connexion"}),y.jsx(cr,{method:"post",action:"/auth/google",children:y.jsx(tt,{type:"submit",variant:"secondary",size:"sm",leftIcon:y.jsx(V,{icon:$o}),children:y.jsx("span",{className:"hidden sm:inline",children:"Google"})})})]})})]})})},Cu=[{name:"Tableau de Bord",to:"/dashboard",icon:ei},{name:"Tickets SAP",to:"/tickets-sap",icon:ti},{name:"Envois CTN",to:"/envois-ctn",icon:ni}],un={name:"Admin",to:"/admin",icon:ri},Ru="https://www.jdc.fr/images/logo_jdc_blanc.svg",ku=({isOpen:t,onClose:e,user:n,profile:r,onLoginClick:i,loadingAuth:s})=>{var u,m;const o="text-jdc-yellow bg-jdc-gray-800",l="text-jdc-gray-300 hover:text-white hover:bg-jdc-gray-700",a="flex items-center px-3 py-2 rounded-md text-base font-medium transition-colors",c=!s&&((u=r==null?void 0:r.role)==null?void 0:u.toLowerCase())==="admin";return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:e,"aria-hidden":"true",children:y.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-jdc-blue-darker shadow-xl z-50 flex flex-col",onClick:h=>h.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-jdc-gray-800",children:[y.jsx(ai,{to:n?"/dashboard":"/",onClick:e,children:y.jsx("img",{src:Ru,alt:"JDC Logo",className:"h-8 w-auto"})}),y.jsx("button",{onClick:e,className:"text-jdc-gray-400 hover:text-white focus:outline-none","aria-label":"Fermer le menu",children:y.jsx(V,{icon:Nn,size:"lg"})})]}),y.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:s?y.jsx("div",{className:"px-3 py-2 text-jdc-gray-400",children:"Chargement..."}):n?y.jsxs(y.Fragment,{children:[Cu.map(h=>y.jsxs(nt,{to:h.to,onClick:e,className:({isActive:p})=>`${a} ${p?o:l}`,prefetch:"intent",children:[y.jsx(V,{icon:h.icon,className:"mr-3 h-5 w-5"}),h.name]},h.to)),c&&y.jsxs(nt,{to:un.to,onClick:e,className:({isActive:h})=>`${a} ${h?o:l}`,children:[y.jsx(V,{icon:un.icon,className:"mr-3 h-5 w-5"}),un.name]})]}):y.jsx("div",{className:"px-3 py-2 text-jdc-gray-400",children:"Veuillez vous connecter."})}),y.jsx("div",{className:"border-t border-jdc-gray-800 p-4",children:s?y.jsx("div",{className:"h-10 bg-jdc-gray-700 rounded animate-pulse"}):n?y.jsx("div",{className:"space-y-3",children:y.jsxs("div",{className:"flex items-center space-x-2 text-sm text-jdc-gray-300",children:[y.jsx(V,{icon:ii,className:"h-6 w-6"}),y.jsx("span",{className:"truncate",title:n.email??"",children:(r==null?void 0:r.displayName)||n.displayName||((m=n.email)==null?void 0:m.split("@")[0])})]})}):y.jsx(tt,{variant:"primary",size:"sm",onClick:()=>{i(),e()},className:"w-full",leftIcon:y.jsx(V,{icon:si}),children:"Connexion"})})]})}):null};function Pu(t){return uo({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function Qn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function hs(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Au=hs,ps=new On("auth","Firebase",hs());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new yo("@firebase/auth");function Nu(t,...e){Lt.logLevel<=pi.WARN&&Lt.warn(`Auth (${ut}): ${t}`,...e)}function Tt(t,...e){Lt.logLevel<=pi.ERROR&&Lt.error(`Auth (${ut}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,...e){throw er(t,...e)}function ee(t,...e){return er(t,...e)}function Zn(t,e,n){const r=Object.assign(Object.assign({},Au()),{[e]:n});return new On("auth","Firebase",r).create(e,{appName:t.name})}function Ae(t){return Zn(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ou(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ae(t,"argument-error"),Zn(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function er(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ps.create(t,...e)}function C(t,e,...n){if(!t)throw er(e,...n)}function fe(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tt(e),new Error(e)}function me(t,e){t||fe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Lu(){return Dr()==="http:"||Dr()==="https:"}function Dr(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lu()||bo()||"connection"in navigator)?navigator.onLine:!0}function $u(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.shortDelay=e,this.longDelay=n,me(n>e,"Short delay should be less than long delay!"),this.isMobile=po()||mo()}get(){return Mu()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){me(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new mt(3e4,6e4);function nr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xe(t,e,n,r,i={}){return gs(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ct(Object.assign({key:t.config.apiKey},o)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return Eo()||(c.referrerPolicy="no-referrer"),ms.fetch()(vs(t,t.config.apiHost,n,l),c)})}async function gs(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Du),e);try{const i=new Uu(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _t(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw _t(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw _t(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw _t(t,"user-disabled",o);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Zn(t,u,c);ae(t,u)}}catch(i){if(i instanceof Ln)throw i;ae(t,"network-request-failed",{message:String(i)})}}async function ju(t,e,n,r,i={}){const s=await Xe(t,e,n,r,i);return"mfaPendingCredential"in s&&ae(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vs(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?tr(t.config,i):`${t.config.apiScheme}://${i}`}class Uu{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ee(this.auth,"network-request-failed")),Fu.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _t(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ee(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e){return Xe(t,"POST","/v1/accounts:delete",e)}async function ys(t,e){return Xe(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vu(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),i=rr(r);C(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:st(dn(i.auth_time)),issuedAtTime:st(dn(i.iat)),expirationTime:st(dn(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dn(t){return Number(t)*1e3}function rr(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tt("JWT malformed, contained fewer than 3 sections"),null;try{const i=wo(n);return i?JSON.parse(i):(Tt("Failed to decode base64 JWT payload"),null)}catch(i){return Tt("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Fr(t){const e=rr(t);return C(e,"internal-error"),C(typeof e.exp<"u","internal-error"),C(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lt(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&Wu(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Wu({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=st(this.lastLoginAt),this.creationTime=st(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mt(t){var e;const n=t.auth,r=await t.getIdToken(),i=await lt(t,ys(n,{idToken:r}));C(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bs(s.providerUserInfo):[],l=zu(t.providerData,o),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=a?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Pn(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,m)}async function Gu(t){const e=Ge(t);await Mt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zu(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bs(t){return t.map(e=>{var{providerId:n}=e,r=Qn(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t,e){const n=await gs(t,{},async()=>{const r=ct({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vs(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ms.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ku(t,e){return Xe(t,"POST","/v2/accounts:revokeToken",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C(typeof e.idToken<"u","internal-error"),C(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){C(e.length!==0,"internal-error");const n=Fr(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(C(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qu(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ue;return r&&(C(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(C(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(C(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ue,this.toJSON())}_performRefresh(){return fe("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e){C(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class he{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Qn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await lt(this,this.stsTokenManager.getToken(this.auth,e));return C(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vu(this,e)}reload(){return Gu(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mt(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(de(this.auth.app))return Promise.reject(Ae(this.auth));const e=await this.getIdToken();return await lt(this,Hu(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,a,c,u;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,f=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(l=n.tenantId)!==null&&l!==void 0?l:void 0,v=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:I,isAnonymous:_,providerData:S,stsTokenManager:x}=n;C(w&&x,e,"internal-error");const k=Ue.fromJSON(this.name,x);C(typeof w=="string",e,"internal-error"),ye(m,e.name),ye(h,e.name),C(typeof I=="boolean",e,"internal-error"),C(typeof _=="boolean",e,"internal-error"),ye(p,e.name),ye(f,e.name),ye(g,e.name),ye(v,e.name),ye(b,e.name),ye(E,e.name);const D=new he({uid:w,auth:e,email:h,emailVerified:I,displayName:m,isAnonymous:_,photoURL:f,phoneNumber:p,tenantId:g,stsTokenManager:k,createdAt:b,lastLoginAt:E});return S&&Array.isArray(S)&&(D.providerData=S.map(N=>Object.assign({},N))),v&&(D._redirectEventId=v),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ue;i.updateFromServerResponse(n);const s=new he({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mt(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];C(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?bs(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ue;l.updateFromIdToken(r);const a=new he({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pn(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Map;function pe(t){me(t instanceof Function,"Expected a class definition");let e=jr.get(t);return e?(me(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jr.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ws.type="NONE";const Ur=ws;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e,n){return`firebase:${t}:${e}:${n}`}class He{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=St(this.userKey,i.apiKey,s),this.fullPersistenceKey=St("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?he._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new He(pe(Ur),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||pe(Ur);const o=St(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const u=await c._get(o);if(u){const m=he._fromJSON(e,u);c!==s&&(l=m),s=c;break}}catch{}const a=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new He(s,e,r):(s=a[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new He(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xs(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Es(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ss(e))return"Blackberry";if(Cs(e))return"Webos";if(Is(e))return"Safari";if((e.includes("chrome/")||_s(e))&&!e.includes("edge/"))return"Chrome";if(Ts(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Es(t=Q()){return/firefox\//i.test(t)}function Is(t=Q()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _s(t=Q()){return/crios\//i.test(t)}function xs(t=Q()){return/iemobile/i.test(t)}function Ts(t=Q()){return/android/i.test(t)}function Ss(t=Q()){return/blackberry/i.test(t)}function Cs(t=Q()){return/webos/i.test(t)}function ir(t=Q()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ju(t=Q()){var e;return ir(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Yu(){return go()&&document.documentMode===10}function Rs(t=Q()){return ir(t)||Ts(t)||Cs(t)||Ss(t)||/windows phone/i.test(t)||xs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e=[]){let n;switch(t){case"Browser":n=Hr(Q());break;case"Worker":n=`${Hr(Q())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ut}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const a=e(s);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(t,e={}){return Xe(t,"GET","/v2/passwordPolicy",nr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=6;class ed{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Zu,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vr(this),this.idTokenSubscription=new Vr(this),this.beforeStateQueue=new Xu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ps,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pe(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await He.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ys(this,{idToken:e}),r=await he._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(de(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mt(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$u()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(de(this.app))return Promise.reject(Ae(this));const n=e?Ge(e):null;return n&&C(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return de(this.app)?Promise.reject(Ae(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return de(this.app)?Promise.reject(Ae(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pe(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qu(this),n=new ed(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ku(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pe(e)||this._popupRedirectResolver;C(n,this,"argument-error"),this.redirectPersistenceManager=await He.create(this,[pe(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(C(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ks(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Nu(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kt(t){return Ge(t)}class Vr{constructor(e){this.auth=e,this.observer=null,this.addObserver=Io(n=>this.observer=n)}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nd(t){sr=t}function rd(t){return sr.loadJS(t)}function id(){return sr.gapiScript}function sd(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e){const n=fi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ho(s,e??{}))return i;ae(i,"already-initialized")}return n.initialize({options:e})}function ad(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pe);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ld(t,e,n){const r=Kt(t);C(r._canInitEmulator,r,"emulator-config-failed"),C(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Ps(e),{host:o,port:l}=cd(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ud()}function Ps(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cd(t){const e=Ps(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Wr(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Wr(o)}}}function Wr(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ud(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fe("not implemented")}_getIdTokenResponse(e){return fe("not implemented")}_linkToIdToken(e,n){return fe("not implemented")}_getReauthenticationResolver(e){return fe("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ve(t,e){return ju(t,"POST","/v1/accounts:signInWithIdp",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="http://localhost";class $e extends As{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $e(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ae("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Qn(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $e(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ve(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ve(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ve(e,n)}buildRequest(){const e={requestUri:dd,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ct(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt extends or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be extends gt{constructor(){super("facebook.com")}static credential(e){return $e._fromParams({providerId:be.PROVIDER_ID,signInMethod:be.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return be.credentialFromTaggedObject(e)}static credentialFromError(e){return be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return be.credential(e.oauthAccessToken)}catch{return null}}}be.FACEBOOK_SIGN_IN_METHOD="facebook.com";be.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue extends gt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $e._fromParams({providerId:ue.PROVIDER_ID,signInMethod:ue.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ue.credentialFromTaggedObject(e)}static credentialFromError(e){return ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ue.credential(n,r)}catch{return null}}}ue.GOOGLE_SIGN_IN_METHOD="google.com";ue.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we extends gt{constructor(){super("github.com")}static credential(e){return $e._fromParams({providerId:we.PROVIDER_ID,signInMethod:we.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return we.credentialFromTaggedObject(e)}static credentialFromError(e){return we.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return we.credential(e.oauthAccessToken)}catch{return null}}}we.GITHUB_SIGN_IN_METHOD="github.com";we.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends gt{constructor(){super("twitter.com")}static credential(e,n){return $e._fromParams({providerId:Ee.PROVIDER_ID,signInMethod:Ee.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ee.credentialFromTaggedObject(e)}static credentialFromError(e){return Ee.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ee.credential(n,r)}catch{return null}}}Ee.TWITTER_SIGN_IN_METHOD="twitter.com";Ee.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await he._fromIdTokenResponse(e,r,i),o=Br(r);return new Be({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Br(r);return new Be({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Br(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends Ln{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $t(e,n,r,i)}}function Ns(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$t._fromErrorAndOperation(t,s,e,r):s})}async function fd(t,e,n=!1){const r=await lt(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Be._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t,e,n=!1){const{auth:r}=t;if(de(r.app))return Promise.reject(Ae(r));const i="reauthenticate";try{const s=await lt(t,Ns(r,i,e,t),n);C(s.idToken,r,"internal-error");const o=rr(s.idToken);C(o,r,"internal-error");const{sub:l}=o;return C(t.uid===l,r,"user-mismatch"),Be._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ae(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e,n=!1){if(de(t.app))return Promise.reject(Ae(t));const r="signIn",i=await Ns(t,r,e),s=await Be._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function md(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function gd(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}const Dt="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dt,"1"),this.storage.removeItem(Dt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=1e3,yd=10;class Ls extends Os{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Yu()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yd):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ls.type="LOCAL";const bd=Ls;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Os{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ms.type="SESSION";const $s=Ms;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Jt(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),a=await wd(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jt.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,a)=>{const c=ar("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const h=m;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(){return window}function Id(t){se().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return typeof se().WorkerGlobalScope<"u"&&typeof se().importScripts=="function"}async function _d(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xd(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Td(){return Ds()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="firebaseLocalStorageDb",Sd=1,Ft="firebaseLocalStorage",js="fbase_key";class vt{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yt(t,e){return t.transaction([Ft],e?"readwrite":"readonly").objectStore(Ft)}function Cd(){const t=indexedDB.deleteDatabase(Fs);return new vt(t).toPromise()}function An(){const t=indexedDB.open(Fs,Sd);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ft,{keyPath:js})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ft)?e(r):(r.close(),await Cd(),e(await An()))})})}async function Gr(t,e,n){const r=Yt(t,!0).put({[js]:e,value:n});return new vt(r).toPromise()}async function Rd(t,e){const n=Yt(t,!1).get(e),r=await new vt(n).toPromise();return r===void 0?null:r.value}function zr(t,e){const n=Yt(t,!0).delete(e);return new vt(n).toPromise()}const kd=800,Pd=3;class Us{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await An(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Pd)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ds()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jt._getInstance(Td()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _d(),!this.activeServiceWorker)return;this.sender=new Ed(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xd()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await An();return await Gr(e,Dt,"1"),await zr(e,Dt),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gr(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Rd(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zr(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yt(i,!1).getAll();return new vt(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Us.type="LOCAL";const Ad=Us;new mt(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t,e){return e?pe(e):(C(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends As{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ve(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nd(t){return pd(t.auth,new lr(t),t.bypassAuthState)}function Od(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),hd(n,new lr(t),t.bypassAuthState)}async function Ld(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),fd(n,new lr(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nd;case"linkViaPopup":case"linkViaRedirect":return Ld;case"reauthViaPopup":case"reauthViaRedirect":return Od;default:ae(this.auth,"internal-error")}}resolve(e){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new mt(2e3,1e4);async function $d(t,e,n){if(de(t.app))return Promise.reject(ee(t,"operation-not-supported-in-this-environment"));const r=Kt(t);Ou(t,e,or);const i=Hs(r,n);return new ke(r,"signInViaPopup",e,i).executeNotNull()}class ke extends Vs{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ke.currentPopupAction&&ke.currentPopupAction.cancel(),ke.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return C(e,this.auth,"internal-error"),e}async onExecution(){me(this.filter.length===1,"Popup operations only handle one event");const e=ar();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ee(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ke.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Md.get())};e()}}ke.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="pendingRedirect",Ct=new Map;class Fd extends Vs{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ct.get(this.auth._key());if(!e){try{const r=await jd(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ct.set(this.auth._key(),e)}return this.bypassAuthState||Ct.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jd(t,e){const n=Vd(e),r=Hd(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Ud(t,e){Ct.set(t._key(),e)}function Hd(t){return pe(t._redirectPersistence)}function Vd(t){return St(Dd,t.config.apiKey,t.name)}async function Wd(t,e,n=!1){if(de(t.app))return Promise.reject(Ae(t));const r=Kt(t),i=Hs(r,e),o=await new Fd(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=10*60*1e3;class Gd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zd(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ws(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ee(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bd&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ws({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zd(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ws(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t,e={}){return Xe(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jd=/^https?/;async function Yd(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qd(t);for(const n of e)try{if(Xd(n))return}catch{}ae(t,"unauthorized-domain")}function Xd(t){const e=kn(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Jd.test(n))return!1;if(Kd.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new mt(3e4,6e4);function Kr(){const t=se().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zd(t){return new Promise((e,n)=>{var r,i,s;function o(){Kr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kr(),n(ee(t,"network-request-failed"))},timeout:Qd.get()})}if(!((i=(r=se().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=se().gapi)===null||s===void 0)&&s.load)o();else{const l=sd("iframefcb");return se()[l]=()=>{gapi.load?o():n(ee(t,"network-request-failed"))},rd(`${id()}?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw Rt=null,e})}let Rt=null;function ef(t){return Rt=Rt||Zd(t),Rt}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new mt(5e3,15e3),nf="__/auth/iframe",rf="emulator/auth/iframe",sf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},of=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function af(t){const e=t.config;C(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tr(e,rf):`https://${t.config.authDomain}/${nf}`,r={apiKey:e.apiKey,appName:t.name,v:ut},i=of.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ct(r).slice(1)}`}async function lf(t){const e=await ef(t),n=se().gapi;return C(n,t,"internal-error"),e.open({where:document.body,url:af(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sf,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ee(t,"network-request-failed"),l=se().setTimeout(()=>{s(o)},tf.get());function a(){se().clearTimeout(l),i(r)}r.ping(a).then(a,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uf=500,df=600,ff="_blank",hf="http://localhost";class Jr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pf(t,e,n,r=uf,i=df){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},cf),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Q().toLowerCase();n&&(l=_s(c)?ff:n),Es(c)&&(e=e||hf,a.scrollbars="yes");const u=Object.entries(a).reduce((h,[p,f])=>`${h}${p}=${f},`,"");if(Ju(c)&&l!=="_self")return mf(e||"",l),new Jr(null);const m=window.open(e||"",l,u);C(m,t,"popup-blocked");try{m.focus()}catch{}return new Jr(m)}function mf(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="__/auth/handler",vf="emulator/auth/handler",yf=encodeURIComponent("fac");async function Yr(t,e,n,r,i,s){C(t.config.authDomain,t,"auth-domain-config-required"),C(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ut,eventId:i};if(e instanceof or){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,m]of Object.entries({}))o[u]=m}if(e instanceof gt){const u=e.getScopes().filter(m=>m!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const a=await t._getAppCheckToken(),c=a?`#${yf}=${encodeURIComponent(a)}`:"";return`${bf(t)}?${ct(l).slice(1)}${c}`}function bf({config:t}){return t.emulator?tr(t,vf):`https://${t.authDomain}/${gf}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="webStorageSupport";class wf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$s,this._completeRedirectFn=Wd,this._overrideRedirectResult=Ud}async _openPopup(e,n,r,i){var s;me((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Yr(e,n,r,kn(),i);return pf(e,o,ar())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Yr(e,n,r,kn(),i);return Id(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(me(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lf(e),r=new Gd(e);return n.register("authEvent",i=>(C(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fn,{type:fn},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fn];o!==void 0&&n(!!o),ae(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Yd(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rs()||Is()||ir()}}const Ef=wf;var Xr="@firebase/auth",Qr="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xf(t){ur(new dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;C(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ks(t)},c=new td(r,i,s,a);return ad(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ur(new dr("auth-internal",e=>{const n=Kt(e.getProvider("auth").getImmediate());return(r=>new If(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(Xr,Qr,_f(t)),pn(Xr,Qr,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=5*60,Sf=hi("authIdTokenMaxAge")||Tf;let Zr=null;const Cf=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Sf)return;const i=n==null?void 0:n.token;Zr!==i&&(Zr=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Rf(t=di()){const e=fi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=od(t,{popupRedirectResolver:Ef,persistence:[Ad,bd,$s]}),r=hi("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Cf(s.toString());gd(n,o,()=>o(n.currentUser)),md(n,l=>o(l))}}const i=fo("auth");return i&&ld(n,`http://${i}`),n}function kf(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nd({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ee("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kf().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xf("Browser");var Pf="firebase",Af="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(Pf,Af,"app");const Nf={apiKey:"AIzaSyADAy8ySvJsUP5diMyR9eIUgtPFimpydcA",authDomain:"sap-jdc.firebaseapp.com",databaseURL:"https://sap-jdc-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sap-jdc",storageBucket:"sap-jdc.appspot.com",messagingSenderId:"1079234336489",appId:"1:1079234336489:web:2428621b62a393068ec278",measurementId:"G-PRWSK0TEFZ"},Bs=xo().length?di():To(Nf),Of=Rf(Bs),Lf=_o(Bs),Mf=t=>({uid:t.uid,email:t.email,displayName:t.displayName}),$f=async()=>{var e;const t=new ue;try{console.log("[AuthService] Attempting Google Sign-In Popup...");const r=(await $d(Of,t)).user;console.log(`[AuthService] Google Sign-In successful for: ${r.uid} (${r.email})`);try{console.log(`[AuthService] Checking for existing Firestore profile for: ${r.uid}`),await So(r.uid),console.log(`[AuthService] Firestore profile found for: ${r.uid}`)}catch(i){if((e=i.message)!=null&&e.includes("not found")||i.code==="not-found"){console.log(`[AuthService] No Firestore profile found for ${r.uid}. Creating one...`);try{await Co(r.uid,r.email||`no-email-${r.uid}@example.com`,r.displayName||"Utilisateur Google","Technician"),console.log(`[AuthService] Firestore profile created successfully for Google user: ${r.uid}`)}catch(s){console.error(`[AuthService] CRITICAL: Failed to create Firestore profile for Google user ${r.uid} after successful auth:`,s)}}else throw console.error(`[AuthService] Error checking Firestore profile for ${r.uid}:`,i),new Error("Erreur lors de la vrification du profil utilisateur.")}return Mf(r)}catch(n){console.error("[AuthService] Google Sign In Error:",n);const r=n;throw r.code==="auth/popup-closed-by-user"?new Error("Connexion Google annule."):r.code==="auth/account-exists-with-different-credential"?new Error("Un compte existe dj avec cet email mais avec une mthode de connexion diffrente."):r.code==="auth/cancelled-popup-request"?new Error("Multiples tentatives de connexion Google dtectes. Veuillez ressayer."):new Error("Erreur lors de la connexion avec Google. Veuillez ressayer.")}},Df=({isOpen:t,onClose:e})=>{const[n,r]=d.useState(!1),[i,s]=d.useState(!1),[o,l]=d.useState(null),{addToast:a}=Mn();if(!t)return null;const c=()=>{l(null),r(!1),s(!1),e()},u=async()=>{s(!0),l(null);try{const m=await $f();a({type:"success",message:`Connect avec Google: ${m.displayName||m.email}`}),c()}catch(m){const h=m instanceof Error?m.message:"Erreur de connexion Google.";l(h),a({type:"error",message:h})}finally{s(!1)}};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:c,role:"dialog","aria-modal":"true","aria-labelledby":"auth-modal-title",children:y.jsxs("div",{className:"bg-jdc-card p-6 md:p-8 rounded-lg shadow-xl relative w-full max-w-md",onClick:m=>m.stopPropagation(),children:[y.jsx("button",{onClick:c,className:"absolute top-3 right-3 text-jdc-gray-400 hover:text-white focus:outline-none","aria-label":"Fermer la modal",children:y.jsx(V,{icon:Nn,size:"lg"})}),y.jsx("h2",{id:"auth-modal-title",className:"text-2xl font-semibold text-white mb-6 text-center",children:"Connexion"}),y.jsxs(tt,{variant:"secondary",className:"w-full mb-4 flex items-center justify-center gap-2 border border-jdc-gray-600 hover:bg-jdc-gray-700",onClick:u,isLoading:i,disabled:n||i,children:[i?y.jsx(V,{icon:Qs,spin:!0}):y.jsx(Pu,{size:20}),y.jsx("span",{children:"Se connecter avec Google"})]})]})})},Ff={success:{icon:no,bgClass:"bg-green-600",iconColor:"text-green-100",textColor:"text-green-50",progressClass:"bg-green-200"},error:{icon:to,bgClass:"bg-red-600",iconColor:"text-red-100",textColor:"text-red-50",progressClass:"bg-red-200"},info:{icon:eo,bgClass:"bg-blue-600",iconColor:"text-blue-100",textColor:"text-blue-50",progressClass:"bg-blue-200"},warning:{icon:Zs,bgClass:"bg-yellow-500",iconColor:"text-yellow-100",textColor:"text-yellow-50",progressClass:"bg-yellow-200"}},jf=({toast:t,onClose:e})=>{const n=Ff[t.type];return y.jsx("div",{className:`max-w-sm w-full ${n.bgClass} shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden mb-3 transition-all duration-300 ease-in-out`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:y.jsx("div",{className:"p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(V,{icon:n.icon,className:`h-6 w-6 ${n.iconColor}`,"aria-hidden":"true"})}),y.jsxs("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:[y.jsx("p",{className:`text-sm font-medium ${n.textColor}`,children:t.title}),y.jsx("p",{className:`mt-1 text-sm ${n.textColor} opacity-90`,children:t.message})]}),y.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:y.jsxs("button",{onClick:()=>e(t.id),className:`inline-flex rounded-md ${n.bgClass} ${n.textColor} opacity-80 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-${t.type}-600 focus:ring-white`,children:[y.jsx("span",{className:"sr-only",children:"Fermer"}),y.jsx(V,{icon:Nn,className:"h-5 w-5","aria-hidden":"true"})]})})]})})})},Uf=()=>{const{toasts:t,removeToast:e}=Mn();return t.length?y.jsx("div",{className:"fixed inset-0 flex flex-col items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-end z-50 space-y-3",children:t.map(n=>y.jsx(jf,{toast:n,onClose:e},n.id))}):null},Qf=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"},{rel:"stylesheet",href:Lo},{rel:"stylesheet",href:Oo},{rel:"stylesheet",href:No},{rel:"stylesheet",href:Mo}];async function Hf(t){if(!t)return null;console.log(`[getClientUserProfile] Fetching profile client-side for ID: ${t}`);try{const e=Ro(Lf,"users",t),n=await ko(e);if(n.exists()){const r=n.data(),i=r.createdAt instanceof fr?r.createdAt.toDate():void 0,s=r.updatedAt instanceof fr?r.updatedAt.toDate():void 0;return console.log(`[getClientUserProfile] Profile found for ID: ${t}`),{uid:t,email:r.email,displayName:r.displayName,role:r.role,secteurs:r.secteurs,createdAt:i,updatedAt:s}}else return console.warn(`[getClientUserProfile] No profile found for ID: ${t}`),null}catch(e){throw console.error(`[getClientUserProfile] Error fetching profile for ID ${t}:`,e),new Error(`Impossible de rcuprer le profil client (ID: ${t}).`)}}function Vf({children:t}){const{user:e}=ao(),n=oi(),r=lo(),{addToast:i}=Mn(),[s,o]=d.useState(null),[l,a]=d.useState(!1),[c,u]=d.useState(!1),[m,h]=d.useState(!1);d.useEffect(()=>{r.state==="idle"&&!l?pr.done():pr.start()},[r.state,l]),d.useEffect(()=>{let b=!0;return(async()=>{const w=e==null?void 0:e.userId;if(w){console.log(`[App Effect] User session found (userId: ${w}). Fetching profile client-side...`),a(!0),o(null);try{const I=await Hf(w);b&&(o(I),I||console.warn(`[App Effect] Profile not found client-side for userId: ${w}`))}catch(I){console.error("[App Effect] Error fetching profile client-side:",I),b&&o(null),i({message:`Erreur chargement profil: ${I.message}`,type:"error"})}finally{b&&a(!1)}}else console.log("[App Effect] No user session, clearing profile."),b&&(o(null),a(!1))})(),()=>{b=!1}},[e,i]);const p=()=>u(!c),f=()=>h(!0),g=()=>h(!1),v=n.pathname==="/dashboard";return y.jsxs(y.Fragment,{children:[y.jsx(Su,{user:e,profile:s,onToggleMobileMenu:p,onLoginClick:f,loadingAuth:r.state!=="idle"||l}),y.jsx(ku,{isOpen:c,onClose:p,user:e,profile:s,onLoginClick:f,loadingAuth:r.state!=="idle"||l}),y.jsx(Df,{isOpen:m,onClose:g})," ",y.jsx("main",{className:`container mx-auto px-4 py-6 ${v?"mt-0":"mt-16 md:mt-20"}`,children:y.jsx(co,{context:{user:e,profile:s,profileLoading:l}})}),y.jsx(Uf,{})," "]})}function Zf(){return y.jsxs("html",{lang:"fr",className:"h-full bg-jdc-blue-dark",children:[y.jsxs("head",{children:[y.jsx("meta",{charSet:"utf-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),y.jsx(li,{}),y.jsx(ci,{})]}),y.jsxs("body",{className:"h-full font-sans text-jdc-gray-300",children:[" ",y.jsx(Po,{children:y.jsx(Vf,{children:y.jsx(d.Suspense,{fallback:y.jsx("div",{children:"Chargement de l'application..."})})})}),y.jsx("div",{id:"modal-root"})," ",y.jsx(Ao,{}),y.jsx(ui,{})]})]})}function eh(){return y.jsxs("html",{lang:"fr",className:"h-full bg-jdc-blue-dark",children:[y.jsxs("head",{children:[y.jsx("title",{children:"Oops! Une erreur est survenue"}),y.jsx(li,{}),y.jsx(ci,{})]}),y.jsxs("body",{className:"h-full font-sans text-white flex flex-col items-center justify-center",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Une erreur est survenue"}),y.jsx("p",{children:"Nous sommes dsols, quelque chose s'est mal pass."}),y.jsx(ui,{})]})]})}export{eh as ErrorBoundary,Zf as default,Qf as links};

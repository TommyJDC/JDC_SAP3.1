const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mapbox-gl-BAZnStSj.js","assets/jsx-runtime-CQPF1LdT.js"])))=>i.map(i=>d[i]);
import{r as h,R as xt,j as T}from"./jsx-runtime-CQPF1LdT.js";import{_ as Tt}from"./dashboard-BFWp1Lf2.js";import{r as Qe}from"./components-DwAki7mf.js";import{m as At,n as Ot}from"./firestore.service-B-C4dBwJ.js";import{F as Y,p as Lt,c as Ae,m as Mt}from"./index-C9mCl7jc.js";const Nt=h.createContext(null);function Ft(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0;return n===o&&r===s}function P(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!P(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!P(e[o],t[o]))return!1;return!0}return!1}function Pt(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Oe(e,t){if(!e.getProjection)return;const n=e.getProjection(),r=t.getProjection();P(n,r)||t.setProjection(n)}function Le(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Me(e,t){const n=t.viewState||t;let r=!1;if("zoom"in n){const o=e.zoom;e.zoom=n.zoom,r=r||o!==e.zoom}if("bearing"in n){const o=e.bearing;e.bearing=n.bearing,r=r||o!==e.bearing}if("pitch"in n){const o=e.pitch;e.pitch=n.pitch,r=r||o!==e.pitch}if(n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),"longitude"in n&&"latitude"in n){const o=e.center;e.center=new o.constructor(n.longitude,n.latitude),r=r||o!==e.center}return r}const kt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ne(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map(r=>{let o=null;"interactive"in r&&(o=Object.assign({},r),delete o.interactive);const s=t[r.ref];if(s){o=o||Object.assign({},r),delete o.ref;for(const i of kt)i in s&&(o[i]=s[i])}return o||r});return{...e,layers:n}}var Fe={};const Pe={version:8,sources:{},layers:[]},ke={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},pe={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},je={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},jt=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Bt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class H{constructor(t,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const s=this.props[je[o.type]];s?s(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const s=this.props[ke[o.type]];s&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),s(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const s=this.props[pe[o.type]];s&&s(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const r=this._updateSettings(t,n);r&&this._createShadowTransform(this._map);const o=this._updateSize(t),s=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(r||o||s&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const r=H.savedMaps.pop();if(!r)return null;const o=r.map,s=o.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);o._container=n;const i=o._resizeObserver;i&&(i.disconnect(),i.observe(n)),r.setProps({...t,styleDiffing:!1}),o.resize();const{initialViewState:a}=t;return a&&(a.bounds?o.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),r}_initialize(t){const{props:n}=this,{mapStyle:r=Pe}=n,o={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||zt()||null,container:t,style:Ne(r)},s=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,n.gl)}const i=new this._MapClass(o);s.padding&&i.setPadding(s.padding),n.cursor&&(i.getCanvas().style.cursor=n.cursor),this._createShadowTransform(i);const a=i._render;i._render=f=>{this._inRender=!0,a.call(i,f),this._inRender=!1};const u=i._renderTaskQueue.run;i._renderTaskQueue.run=f=>{u.call(i._renderTaskQueue,f),this._onBeforeRepaint()},i.on("render",()=>this._onAfterRepaint());const c=i.fire;i.fire=this._fireEvent.bind(this,c),i.on("resize",()=>{this._renderTransform.resize(i.transform.width,i.transform.height)}),i.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Oe(i.transform,this._renderTransform)}),i.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const f in ke)i.on(f,this._onPointerEvent);for(const f in pe)i.on(f,this._onCameraEvent);for(const f in je)i.on(f,this._onEvent);this._map=i}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),H.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=Pt(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const r=this._map,o=this._renderTransform,{zoom:s,pitch:i,bearing:a}=o,u=r.isMoving();u&&(o.cameraElevationReference="sea");const c=Me(o,{...Le(r.transform),...t});if(u&&(o.cameraElevationReference="ground"),c&&n){const f=this._deferredEvents;f.move=!0,f.zoom||(f.zoom=s!==o.zoom),f.rotate||(f.rotate=a!==o.bearing),f.pitch||(f.pitch=i!==o.pitch)}return u||Me(r.transform,t),c}_updateSettings(t,n){const r=this._map;let o=!1;for(const s of jt)if(s in t&&!P(t[s],n[s])){o=!0;const i=r[`set${s[0].toUpperCase()}${s.slice(1)}`];i==null||i.call(r,t[s])}return o}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:r=Pe,styleDiffing:o=!0}=t,s={diff:o};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Ne(r),s),!0}return!1}_updateStyleComponents(t,n){const r=this._map;let o=!1;return r.isStyleLoaded()&&("light"in t&&r.setLight&&!P(t.light,n.light)&&(o=!0,r.setLight(t.light)),"fog"in t&&r.setFog&&!P(t.fog,n.fog)&&(o=!0,r.setFog(t.fog)),"terrain"in t&&r.setTerrain&&!P(t.terrain,n.terrain)&&(!t.terrain||r.getSource(t.terrain.source))&&(o=!0,r.setTerrain(t.terrain))),o}_updateHandlers(t,n){var r,o;const s=this._map;let i=!1;for(const a of Bt){const u=(r=t[a])!==null&&r!==void 0?r:!0,c=(o=n[a])!==null&&o!==void 0?o:!0;P(u,c)||(i=!0,u?s[a].enable(u):s[a].disable())}return i}_queryRenderedFeatures(t){const n=this._map,r=n.transform,{interactiveLayerIds:o=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(t,{layers:o.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(t){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=t.type,i=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(t.point),u=a.length>0;!u&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,u&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=s}else this._hoveredFeatures=null}_fireEvent(t,n,r){const o=this._map,s=o.transform,i=typeof n=="string"?n:n.type;return i==="move"&&this._updateViewState(this.props,!1),i in pe&&(typeof n=="object"&&(n.viewState=Le(s)),this._map.isMoving())?(o.transform=this._renderTransform,t.call(o,n,r),o.transform=s,o):(t.call(o,n,r),o)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&t.fire(r);this._internalUpdate=!1;const n=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{Oe(this._renderTransform,n),t.transform=n}}}H.savedMaps=[];function zt(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Fe.MapboxAccessToken}catch{}try{e=e||Fe.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Ut=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Dt(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:r=>{const o=t.transform;t.transform=e.transform;const s=t.project(r);return t.transform=o,s},unproject:r=>{const o=t.transform;t.transform=e.transform;const s=t.unproject(r);return t.transform=o,s},queryTerrainElevation:(r,o)=>{const s=t.transform;t.transform=e.transform;const i=t.queryTerrainElevation(r,o);return t.transform=s,i},queryRenderedFeatures:(r,o)=>{const s=t.transform;t.transform=e.transform;const i=t.queryRenderedFeatures(r,o);return t.transform=s,i}};for(const r of It(t))!(r in n)&&!Ut.includes(r)&&(n[r]=t[r].bind(t));return n}function It(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}const qt=typeof document<"u"?h.useLayoutEffect:h.useEffect,$t=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Ht(e,t){for(const r of $t)r in t&&(e[r]=t[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const G=h.createContext(null);function Gt(e,t,n){const r=h.useContext(Nt),[o,s]=h.useState(null),i=h.useRef(),{current:a}=h.useRef({mapLib:null,map:null});h.useEffect(()=>{const f=e.mapLib;let d=!0,b;return Promise.resolve(f||n).then(C=>{if(!d)return;if(!C)throw new Error("Invalid mapLib");const m="Map"in C?C:C.default;if(!m.Map)throw new Error("Invalid mapLib");if(Ht(m,e),!m.supported||m.supported(e))e.reuseMaps&&(b=H.reuse(e,i.current)),b||(b=new H(m.Map,e,i.current)),a.map=Dt(b),a.mapLib=m,s(b),r==null||r.onMapMount(a.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(C=>{const{onError:m}=e;m?m({type:"error",target:null,originalEvent:null,error:C}):console.error(C)}),()=>{d=!1,b&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?b.recycle():b.destroy())}},[]),qt(()=>{o&&o.setProps(e)}),h.useImperativeHandle(t,()=>a.map,[o]);const u=h.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),c={height:"100%"};return h.createElement("div",{id:e.id,ref:i,style:u},o&&h.createElement(G.Provider,{value:a},h.createElement("div",{"mapboxgl-children":"",style:c},e.children)))}const Jt=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function q(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const o=t[r];Number.isFinite(o)&&!Jt.test(r)?n[r]=`${o}px`:n[r]=o}}function Vt(e,t){const{map:n,mapLib:r}=h.useContext(G),o=h.useRef({props:e});o.current.props=e;const s=h.useMemo(()=>{let w=!1;h.Children.forEach(e.children,g=>{g&&(w=!0)});const p={...e,element:w?document.createElement("div"):null},E=new r.Marker(p);return E.setLngLat([e.longitude,e.latitude]),E.getElement().addEventListener("click",g=>{var v,S;(S=(v=o.current.props).onClick)===null||S===void 0||S.call(v,{type:"click",target:E,originalEvent:g})}),E.on("dragstart",g=>{var v,S;const y=g;y.lngLat=s.getLngLat(),(S=(v=o.current.props).onDragStart)===null||S===void 0||S.call(v,y)}),E.on("drag",g=>{var v,S;const y=g;y.lngLat=s.getLngLat(),(S=(v=o.current.props).onDrag)===null||S===void 0||S.call(v,y)}),E.on("dragend",g=>{var v,S;const y=g;y.lngLat=s.getLngLat(),(S=(v=o.current.props).onDragEnd)===null||S===void 0||S.call(v,y)}),E},[]);h.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:i,latitude:a,offset:u,style:c,draggable:f=!1,popup:d=null,rotation:b=0,rotationAlignment:C="auto",pitchAlignment:m="auto"}=e;return h.useEffect(()=>{q(s.getElement(),c)},[c]),h.useImperativeHandle(t,()=>s,[]),(s.getLngLat().lng!==i||s.getLngLat().lat!==a)&&s.setLngLat([i,a]),u&&!Ft(s.getOffset(),u)&&s.setOffset(u),s.isDraggable()!==f&&s.setDraggable(f),s.getRotation()!==b&&s.setRotation(b),s.getRotationAlignment()!==C&&s.setRotationAlignment(C),s.getPitchAlignment()!==m&&s.setPitchAlignment(m),s.getPopup()!==d&&s.setPopup(d),Qe.createPortal(e.children,s.getElement())}const Wt=h.memo(h.forwardRef(Vt));function Be(e){return new Set(e?e.trim().split(/\s+/):[])}function Zt(e,t){const{map:n,mapLib:r}=h.useContext(G),o=h.useMemo(()=>document.createElement("div"),[]),s=h.useRef({props:e});s.current.props=e;const i=h.useMemo(()=>{const a={...e},u=new r.Popup(a);return u.setLngLat([e.longitude,e.latitude]),u.once("open",c=>{var f,d;(d=(f=s.current.props).onOpen)===null||d===void 0||d.call(f,c)}),u},[]);if(h.useEffect(()=>{const a=u=>{var c,f;(f=(c=s.current.props).onClose)===null||f===void 0||f.call(c,u)};return i.on("close",a),i.setDOMContent(o).addTo(n.getMap()),()=>{i.off("close",a),i.isOpen()&&i.remove()}},[]),h.useEffect(()=>{q(i.getElement(),e.style)},[e.style]),h.useImperativeHandle(t,()=>i,[]),i.isOpen()&&((i.getLngLat().lng!==e.longitude||i.getLngLat().lat!==e.latitude)&&i.setLngLat([e.longitude,e.latitude]),e.offset&&!P(i.options.offset,e.offset)&&i.setOffset(e.offset),(i.options.anchor!==e.anchor||i.options.maxWidth!==e.maxWidth)&&(i.options.anchor=e.anchor,i.setMaxWidth(e.maxWidth)),i.options.className!==e.className)){const a=Be(i.options.className),u=Be(e.className);for(const c of a)u.has(c)||i.removeClassName(c);for(const c of u)a.has(c)||i.addClassName(c);i.options.className=e.className}return Qe.createPortal(e.children,o)}const Kt=h.memo(h.forwardRef(Zt));function K(e,t,n,r){const o=h.useContext(G),s=h.useMemo(()=>e(o),[]);return h.useEffect(()=>{const i=t,a=null,u=typeof t=="function"?t:null,{map:c}=o;return c.hasControl(s)||(c.addControl(s,i==null?void 0:i.position),a&&a(o)),()=>{u&&u(o),c.hasControl(s)&&c.removeControl(s)}},[]),s}function Xt(e){const t=K(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return h.useEffect(()=>{q(t._container,e.style)},[e.style]),null}h.memo(Xt);function Qt(e){const t=K(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return h.useEffect(()=>{q(t._controlContainer,e.style)},[e.style]),null}h.memo(Qt);function Yt(e,t){const n=h.useRef({props:e}),r=K(({mapLib:o})=>{const s=new o.GeolocateControl(e),i=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||i(a)},s.on("geolocate",a=>{var u,c;(c=(u=n.current.props).onGeolocate)===null||c===void 0||c.call(u,a)}),s.on("error",a=>{var u,c;(c=(u=n.current.props).onError)===null||c===void 0||c.call(u,a)}),s.on("outofmaxbounds",a=>{var u,c;(c=(u=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(u,a)}),s.on("trackuserlocationstart",a=>{var u,c;(c=(u=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(u,a)}),s.on("trackuserlocationend",a=>{var u,c;(c=(u=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(u,a)}),s},{position:e.position});return n.current.props=e,h.useImperativeHandle(t,()=>r,[]),h.useEffect(()=>{q(r._container,e.style)},[e.style]),null}h.memo(h.forwardRef(Yt));function en(e){const t=K(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return h.useEffect(()=>{q(t._container,e.style)},[e.style]),null}h.memo(en);function tn(e){const t=K(({mapLib:s})=>new s.ScaleControl(e),{position:e.position}),n=h.useRef(e),r=n.current;n.current=e;const{style:o}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&t.setUnit(e.unit),h.useEffect(()=>{q(t._container,o)},[o]),null}h.memo(tn);function se(e,t){if(!e)throw new Error(t)}function nn(e,t,n,r){if(se(n.id===r.id,"layer id changed"),se(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:o={},paint:s={},filter:i,minzoom:a,maxzoom:u,beforeId:c}=n;if(c!==r.beforeId&&e.moveLayer(t,c),o!==r.layout){const f=r.layout||{};for(const d in o)P(o[d],f[d])||e.setLayoutProperty(t,d,o[d]);for(const d in f)o.hasOwnProperty(d)||e.setLayoutProperty(t,d,void 0)}if(s!==r.paint){const f=r.paint||{};for(const d in s)P(s[d],f[d])||e.setPaintProperty(t,d,s[d]);for(const d in f)s.hasOwnProperty(d)||e.setPaintProperty(t,d,void 0)}P(i,r.filter)||e.setFilter(t,i),(a!==r.minzoom||u!==r.maxzoom)&&e.setLayerZoomRange(t,a,u)}function rn(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}let on=0;function sn(e){const t=h.useContext(G).map.getMap(),n=h.useRef(e),[,r]=h.useState(0),o=h.useMemo(()=>e.id||`jsx-layer-${on++}`,[]);if(h.useEffect(()=>{if(t){const i=()=>r(a=>a+1);return t.on("styledata",i),i(),()=>{t.off("styledata",i),t.style&&t.style._loaded&&t.getLayer(o)&&t.removeLayer(o)}}},[t]),t&&t.style&&t.getLayer(o))try{nn(t,o,e,n.current)}catch(i){console.warn(i)}else rn(t,o,e);return n.current=e,null}let an=0;function cn(e,t,n){if(e.style&&e.style._loaded){const r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}function ln(e,t,n){se(t.id===n.id,"source id changed"),se(t.type===n.type,"source type changed");let r="",o=0;for(const i in t)i!=="children"&&i!=="id"&&!P(n[i],t[i])&&(r=i,o++);if(!o)return;const s=t.type;s==="geojson"?e.setData(t.data):s==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&o===1&&r==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&r==="url"?e.setUrl(t.url):"setTiles"in e&&r==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${r}`)}function un(e){const t=h.useContext(G).map.getMap(),n=h.useRef(e),[,r]=h.useState(0),o=h.useMemo(()=>e.id||`jsx-source-${an++}`,[]);h.useEffect(()=>{if(t){const i=()=>setTimeout(()=>r(a=>a+1),0);return t.on("styledata",i),i(),()=>{var a;if(t.off("styledata",i),t.style&&t.style._loaded&&t.getSource(o)){const u=(a=t.getStyle())===null||a===void 0?void 0:a.layers;if(u)for(const c of u)c.source===o&&t.removeLayer(c.id);t.removeSource(o)}}}},[t]);let s=t&&t.style&&t.getSource(o);return s?ln(s,e,n.current):s=cn(t,o,e),n.current=e,s&&h.Children.map(e.children,i=>i&&h.cloneElement(i,{source:o}))||null}const fn=Tt(()=>import("./mapbox-gl-BAZnStSj.js").then(e=>e.m),__vite__mapDeps([0,1])),dn=h.forwardRef(function(t,n){return Gt(t,n,fn)}),hn=Wt,mn=Kt,ze=sn,pn=un;function Ye(e,t){return function(){return e.apply(t,arguments)}}const{toString:gn}=Object.prototype,{getPrototypeOf:ve}=Object,ce=(e=>t=>{const n=gn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),j=e=>(e=e.toLowerCase(),t=>ce(t)===e),le=e=>t=>typeof t===e,{isArray:J}=Array,Z=le("undefined");function yn(e){return e!==null&&!Z(e)&&e.constructor!==null&&!Z(e.constructor)&&k(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const et=j("ArrayBuffer");function bn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&et(e.buffer),t}const wn=le("string"),k=le("function"),tt=le("number"),ue=e=>e!==null&&typeof e=="object",En=e=>e===!0||e===!1,ne=e=>{if(ce(e)!=="object")return!1;const t=ve(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sn=j("Date"),Rn=j("File"),Cn=j("Blob"),_n=j("FileList"),vn=e=>ue(e)&&k(e.pipe),xn=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||k(e.append)&&((t=ce(e))==="formdata"||t==="object"&&k(e.toString)&&e.toString()==="[object FormData]"))},Tn=j("URLSearchParams"),[An,On,Ln,Mn]=["ReadableStream","Request","Response","Headers"].map(j),Nn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function X(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),J(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(r=0;r<i;r++)a=s[r],t.call(null,e[a],a,e)}}function nt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const U=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rt=e=>!Z(e)&&e!==U;function we(){const{caseless:e}=rt(this)&&this||{},t={},n=(r,o)=>{const s=e&&nt(t,o)||o;ne(t[s])&&ne(r)?t[s]=we(t[s],r):ne(r)?t[s]=we({},r):J(r)?t[s]=r.slice():t[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&X(arguments[r],n);return t}const Fn=(e,t,n,{allOwnKeys:r}={})=>(X(t,(o,s)=>{n&&k(o)?e[s]=Ye(o,n):e[s]=o},{allOwnKeys:r}),e),Pn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),kn=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},jn=(e,t,n,r)=>{let o,s,i;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)i=o[s],(!r||r(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&ve(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Bn=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},zn=e=>{if(!e)return null;if(J(e))return e;let t=e.length;if(!tt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Un=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ve(Uint8Array)),Dn=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},In=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},qn=j("HTMLFormElement"),$n=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Ue=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Hn=j("RegExp"),ot=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};X(n,(o,s)=>{let i;(i=t(o,s,e))!==!1&&(r[s]=i||o)}),Object.defineProperties(e,r)},Gn=e=>{ot(e,(t,n)=>{if(k(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(k(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Jn=(e,t)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return J(e)?r(e):r(String(e).split(t)),n},Vn=()=>{},Wn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Zn(e){return!!(e&&k(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Kn=e=>{const t=new Array(10),n=(r,o)=>{if(ue(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const s=J(r)?[]:{};return X(r,(i,a)=>{const u=n(i,o+1);!Z(u)&&(s[a]=u)}),t[o]=void 0,s}}return r};return n(e,0)},Xn=j("AsyncFunction"),Qn=e=>e&&(ue(e)||k(e))&&k(e.then)&&k(e.catch),st=((e,t)=>e?setImmediate:t?((n,r)=>(U.addEventListener("message",({source:o,data:s})=>{o===U&&s===n&&r.length&&r.shift()()},!1),o=>{r.push(o),U.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",k(U.postMessage)),Yn=typeof queueMicrotask<"u"?queueMicrotask.bind(U):typeof process<"u"&&process.nextTick||st,l={isArray:J,isArrayBuffer:et,isBuffer:yn,isFormData:xn,isArrayBufferView:bn,isString:wn,isNumber:tt,isBoolean:En,isObject:ue,isPlainObject:ne,isReadableStream:An,isRequest:On,isResponse:Ln,isHeaders:Mn,isUndefined:Z,isDate:Sn,isFile:Rn,isBlob:Cn,isRegExp:Hn,isFunction:k,isStream:vn,isURLSearchParams:Tn,isTypedArray:Un,isFileList:_n,forEach:X,merge:we,extend:Fn,trim:Nn,stripBOM:Pn,inherits:kn,toFlatObject:jn,kindOf:ce,kindOfTest:j,endsWith:Bn,toArray:zn,forEachEntry:Dn,matchAll:In,isHTMLForm:qn,hasOwnProperty:Ue,hasOwnProp:Ue,reduceDescriptors:ot,freezeMethods:Gn,toObjectSet:Jn,toCamelCase:$n,noop:Vn,toFiniteNumber:Wn,findKey:nt,global:U,isContextDefined:rt,isSpecCompliantForm:Zn,toJSONObject:Kn,isAsyncFn:Xn,isThenable:Qn,setImmediate:st,asap:Yn};function R(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}l.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const it=R.prototype,at={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{at[e]={value:e}});Object.defineProperties(R,at);Object.defineProperty(it,"isAxiosError",{value:!0});R.from=(e,t,n,r,o,s)=>{const i=Object.create(it);return l.toFlatObject(e,i,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),R.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const er=null;function Ee(e){return l.isPlainObject(e)||l.isArray(e)}function ct(e){return l.endsWith(e,"[]")?e.slice(0,-2):e}function De(e,t,n){return e?e.concat(t).map(function(o,s){return o=ct(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function tr(e){return l.isArray(e)&&!e.some(Ee)}const nr=l.toFlatObject(l,{},null,function(t){return/^is[A-Z]/.test(t)});function fe(e,t,n){if(!l.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=l.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,p){return!l.isUndefined(p[w])});const r=n.metaTokens,o=n.visitor||f,s=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(t);if(!l.isFunction(o))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(l.isDate(m))return m.toISOString();if(!u&&l.isBlob(m))throw new R("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(m)||l.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function f(m,w,p){let E=m;if(m&&!p&&typeof m=="object"){if(l.endsWith(w,"{}"))w=r?w:w.slice(0,-2),m=JSON.stringify(m);else if(l.isArray(m)&&tr(m)||(l.isFileList(m)||l.endsWith(w,"[]"))&&(E=l.toArray(m)))return w=ct(w),E.forEach(function(v,S){!(l.isUndefined(v)||v===null)&&t.append(i===!0?De([w],S,s):i===null?w:w+"[]",c(v))}),!1}return Ee(m)?!0:(t.append(De(p,w,s),c(m)),!1)}const d=[],b=Object.assign(nr,{defaultVisitor:f,convertValue:c,isVisitable:Ee});function C(m,w){if(!l.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(m),l.forEach(m,function(E,g){(!(l.isUndefined(E)||E===null)&&o.call(t,E,l.isString(g)?g.trim():g,w,b))===!0&&C(E,w?w.concat(g):[g])}),d.pop()}}if(!l.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Ie(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function xe(e,t){this._pairs=[],e&&fe(e,this,t)}const lt=xe.prototype;lt.append=function(t,n){this._pairs.push([t,n])};lt.toString=function(t){const n=t?function(r){return t.call(this,r,Ie)}:Ie;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function rr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ut(e,t,n){if(!t)return e;const r=n&&n.encode||rr;l.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(t,n):s=l.isURLSearchParams(t)?t.toString():new xe(t,n).toString(r),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class qe{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){l.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ft={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},or=typeof URLSearchParams<"u"?URLSearchParams:xe,sr=typeof FormData<"u"?FormData:null,ir=typeof Blob<"u"?Blob:null,ar={isBrowser:!0,classes:{URLSearchParams:or,FormData:sr,Blob:ir},protocols:["http","https","file","blob","url","data"]},Te=typeof window<"u"&&typeof document<"u",Se=typeof navigator=="object"&&navigator||void 0,cr=Te&&(!Se||["ReactNative","NativeScript","NS"].indexOf(Se.product)<0),lr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ur=Te&&window.location.href||"http://localhost",fr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Te,hasStandardBrowserEnv:cr,hasStandardBrowserWebWorkerEnv:lr,navigator:Se,origin:ur},Symbol.toStringTag,{value:"Module"})),M={...fr,...ar};function dr(e,t){return fe(e,new M.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return M.isNode&&l.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function hr(e){return l.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mr(e){const t={},n=Object.keys(e);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],t[s]=e[s];return t}function dt(e){function t(n,r,o,s){let i=n[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),u=s>=n.length;return i=!i&&l.isArray(o)?o.length:i,u?(l.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!l.isObject(o[i]))&&(o[i]=[]),t(n,r,o[i],s)&&l.isArray(o[i])&&(o[i]=mr(o[i])),!a)}if(l.isFormData(e)&&l.isFunction(e.entries)){const n={};return l.forEachEntry(e,(r,o)=>{t(hr(r),o,n,0)}),n}return null}function pr(e,t,n){if(l.isString(e))try{return(t||JSON.parse)(e),l.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Q={transitional:ft,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=l.isObject(t);if(s&&l.isHTMLForm(t)&&(t=new FormData(t)),l.isFormData(t))return o?JSON.stringify(dt(t)):t;if(l.isArrayBuffer(t)||l.isBuffer(t)||l.isStream(t)||l.isFile(t)||l.isBlob(t)||l.isReadableStream(t))return t;if(l.isArrayBufferView(t))return t.buffer;if(l.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return dr(t,this.formSerializer).toString();if((a=l.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return fe(a?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),pr(t)):t}],transformResponse:[function(t){const n=this.transitional||Q.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(l.isResponse(t)||l.isReadableStream(t))return t;if(t&&l.isString(t)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?R.from(a,R.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:M.classes.FormData,Blob:M.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],e=>{Q.headers[e]={}});const gr=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yr=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||t[n]&&gr[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$e=Symbol("internals");function W(e){return e&&String(e).trim().toLowerCase()}function re(e){return e===!1||e==null?e:l.isArray(e)?e.map(re):String(e)}function br(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const wr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ge(e,t,n,r,o){if(l.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!l.isString(t)){if(l.isString(r))return t.indexOf(r)!==-1;if(l.isRegExp(r))return r.test(t)}}function Er(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Sr(e,t){const n=l.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,s,i){return this[r].call(this,t,o,s,i)},configurable:!0})})}let F=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function s(a,u,c){const f=W(u);if(!f)throw new Error("header name must be a non-empty string");const d=l.findKey(o,f);(!d||o[d]===void 0||c===!0||c===void 0&&o[d]!==!1)&&(o[d||u]=re(a))}const i=(a,u)=>l.forEach(a,(c,f)=>s(c,f,u));if(l.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(l.isString(t)&&(t=t.trim())&&!wr(t))i(yr(t),n);else if(l.isHeaders(t))for(const[a,u]of t.entries())s(u,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=W(t),t){const r=l.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return br(o);if(l.isFunction(n))return n.call(this,o,r);if(l.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=W(t),t){const r=l.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||ge(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function s(i){if(i=W(i),i){const a=l.findKey(r,i);a&&(!n||ge(r,r[a],a,n))&&(delete r[a],o=!0)}}return l.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!t||ge(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,r={};return l.forEach(this,(o,s)=>{const i=l.findKey(r,s);if(i){n[i]=re(o),delete n[s];return}const a=t?Er(s):String(s).trim();a!==s&&delete n[s],n[a]=re(o),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return l.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&l.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[$e]=this[$e]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=W(i);r[a]||(Sr(o,i),r[a]=!0)}return l.isArray(t)?t.forEach(s):s(t),this}};F.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(F.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});l.freezeMethods(F);function ye(e,t){const n=this||Q,r=t||n,o=F.from(r.headers);let s=r.data;return l.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function ht(e){return!!(e&&e.__CANCEL__)}function V(e,t,n){R.call(this,e??"canceled",R.ERR_CANCELED,t,n),this.name="CanceledError"}l.inherits(V,R,{__CANCEL__:!0});function mt(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new R("Request failed with status code "+n.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Rr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Cr(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,s=0,i;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),f=r[s];i||(i=c),n[o]=u,r[o]=c;let d=s,b=0;for(;d!==o;)b+=n[d++],d=d%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const C=f&&c-f;return C?Math.round(b*1e3/C):void 0}}function _r(e,t){let n=0,r=1e3/t,o,s;const i=(c,f=Date.now())=>{n=f,o=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const f=Date.now(),d=f-n;d>=r?i(c,f):(o=c,s||(s=setTimeout(()=>{s=null,i(o)},r-d)))},()=>o&&i(o)]}const ie=(e,t,n=3)=>{let r=0;const o=Cr(50,250);return _r(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,u=i-r,c=o(u),f=i<=a;r=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&f?(a-i)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},He=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ge=e=>(...t)=>l.asap(()=>e(...t)),vr=M.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,M.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(M.origin),M.navigator&&/(msie|trident)/i.test(M.navigator.userAgent)):()=>!0,xr=M.hasStandardBrowserEnv?{write(e,t,n,r,o,s){const i=[e+"="+encodeURIComponent(t)];l.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),l.isString(r)&&i.push("path="+r),l.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ar(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pt(e,t,n){let r=!Tr(t);return e&&(r||n==!1)?Ar(e,t):t}const Je=e=>e instanceof F?{...e}:e;function I(e,t){t=t||{};const n={};function r(c,f,d,b){return l.isPlainObject(c)&&l.isPlainObject(f)?l.merge.call({caseless:b},c,f):l.isPlainObject(f)?l.merge({},f):l.isArray(f)?f.slice():f}function o(c,f,d,b){if(l.isUndefined(f)){if(!l.isUndefined(c))return r(void 0,c,d,b)}else return r(c,f,d,b)}function s(c,f){if(!l.isUndefined(f))return r(void 0,f)}function i(c,f){if(l.isUndefined(f)){if(!l.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,d){if(d in t)return r(c,f);if(d in e)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,f,d)=>o(Je(c),Je(f),d,!0)};return l.forEach(Object.keys(Object.assign({},e,t)),function(f){const d=u[f]||o,b=d(e[f],t[f],f);l.isUndefined(b)&&d!==a||(n[f]=b)}),n}const gt=e=>{const t=I({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=t;t.headers=i=F.from(i),t.url=ut(pt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(l.isFormData(n)){if(M.hasStandardBrowserEnv||M.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[c,...f]=u?u.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...f].join("; "))}}if(M.hasStandardBrowserEnv&&(r&&l.isFunction(r)&&(r=r(t)),r||r!==!1&&vr(t.url))){const c=o&&s&&xr.read(s);c&&i.set(o,c)}return t},Or=typeof XMLHttpRequest<"u",Lr=Or&&function(e){return new Promise(function(n,r){const o=gt(e);let s=o.data;const i=F.from(o.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:c}=o,f,d,b,C,m;function w(){C&&C(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(f),o.signal&&o.signal.removeEventListener("abort",f)}let p=new XMLHttpRequest;p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout;function E(){if(!p)return;const v=F.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:e,request:p};mt(function(_){n(_),w()},function(_){r(_),w()},y),p=null}"onloadend"in p?p.onloadend=E:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(E)},p.onabort=function(){p&&(r(new R("Request aborted",R.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new R("Network Error",R.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let S=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const y=o.transitional||ft;o.timeoutErrorMessage&&(S=o.timeoutErrorMessage),r(new R(S,y.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,e,p)),p=null},s===void 0&&i.setContentType(null),"setRequestHeader"in p&&l.forEach(i.toJSON(),function(S,y){p.setRequestHeader(y,S)}),l.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),a&&a!=="json"&&(p.responseType=o.responseType),c&&([b,m]=ie(c,!0),p.addEventListener("progress",b)),u&&p.upload&&([d,C]=ie(u),p.upload.addEventListener("progress",d),p.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(f=v=>{p&&(r(!v||v.type?new V(null,e,p):v),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(f),o.signal&&(o.signal.aborted?f():o.signal.addEventListener("abort",f)));const g=Rr(o.url);if(g&&M.protocols.indexOf(g)===-1){r(new R("Unsupported protocol "+g+":",R.ERR_BAD_REQUEST,e));return}p.send(s||null)})},Mr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const s=function(c){if(!o){o=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof R?f:new V(f instanceof Error?f.message:f))}};let i=t&&setTimeout(()=>{i=null,s(new R(`timeout ${t} of ms exceeded`,R.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>l.asap(a),u}},Nr=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},Fr=async function*(e,t){for await(const n of Pr(e))yield*Nr(n,t)},Pr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Ve=(e,t,n,r)=>{const o=Fr(e,t);let s=0,i,a=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:f}=await o.next();if(c){a(),u.close();return}let d=f.byteLength;if(n){let b=s+=d;n(b)}u.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(u){return a(u),o.return()}},{highWaterMark:2})},de=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yt=de&&typeof ReadableStream=="function",kr=de&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),bt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},jr=yt&&bt(()=>{let e=!1;const t=new Request(M.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),We=64*1024,Re=yt&&bt(()=>l.isReadableStream(new Response("").body)),ae={stream:Re&&(e=>e.body)};de&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ae[t]&&(ae[t]=l.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new R(`Response type '${t}' is not supported`,R.ERR_NOT_SUPPORT,r)})})})(new Response);const Br=async e=>{if(e==null)return 0;if(l.isBlob(e))return e.size;if(l.isSpecCompliantForm(e))return(await new Request(M.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(l.isArrayBufferView(e)||l.isArrayBuffer(e))return e.byteLength;if(l.isURLSearchParams(e)&&(e=e+""),l.isString(e))return(await kr(e)).byteLength},zr=async(e,t)=>{const n=l.toFiniteNumber(e.getContentLength());return n??Br(t)},Ur=de&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:u,responseType:c,headers:f,withCredentials:d="same-origin",fetchOptions:b}=gt(e);c=c?(c+"").toLowerCase():"text";let C=Mr([o,s&&s.toAbortSignal()],i),m;const w=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let p;try{if(u&&jr&&n!=="get"&&n!=="head"&&(p=await zr(f,r))!==0){let y=new Request(t,{method:"POST",body:r,duplex:"half"}),x;if(l.isFormData(r)&&(x=y.headers.get("content-type"))&&f.setContentType(x),y.body){const[_,O]=He(p,ie(Ge(u)));r=Ve(y.body,We,_,O)}}l.isString(d)||(d=d?"include":"omit");const E="credentials"in Request.prototype;m=new Request(t,{...b,signal:C,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:E?d:void 0});let g=await fetch(m);const v=Re&&(c==="stream"||c==="response");if(Re&&(a||v&&w)){const y={};["status","statusText","headers"].forEach(N=>{y[N]=g[N]});const x=l.toFiniteNumber(g.headers.get("content-length")),[_,O]=a&&He(x,ie(Ge(a),!0))||[];g=new Response(Ve(g.body,We,_,()=>{O&&O(),w&&w()}),y)}c=c||"text";let S=await ae[l.findKey(ae,c)||"text"](g,e);return!v&&w&&w(),await new Promise((y,x)=>{mt(y,x,{data:S,headers:F.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:m})})}catch(E){throw w&&w(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,e,m),{cause:E.cause||E}):R.from(E,E&&E.code,e,m)}}),Ce={http:er,xhr:Lr,fetch:Ur};l.forEach(Ce,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ze=e=>`- ${e}`,Dr=e=>l.isFunction(e)||e===null||e===!1,wt={getAdapter:e=>{e=l.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let s=0;s<t;s++){n=e[s];let i;if(r=n,!Dr(n)&&(r=Ce[(i=String(n)).toLowerCase()],r===void 0))throw new R(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=t?s.length>1?`since :
`+s.map(Ze).join(`
`):" "+Ze(s[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Ce};function be(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new V(null,e)}function Ke(e){return be(e),e.headers=F.from(e.headers),e.data=ye.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wt.getAdapter(e.adapter||Q.adapter)(e).then(function(r){return be(e),r.data=ye.call(e,e.transformResponse,r),r.headers=F.from(r.headers),r},function(r){return ht(r)||(be(e),r&&r.response&&(r.response.data=ye.call(e,e.transformResponse,r.response),r.response.headers=F.from(r.response.headers))),Promise.reject(r)})}const Et="1.8.4",he={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{he[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Xe={};he.transitional=function(t,n,r){function o(s,i){return"[Axios v"+Et+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(t===!1)throw new R(o(i," has been removed"+(n?" in "+n:"")),R.ERR_DEPRECATED);return n&&!Xe[i]&&(Xe[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,i,a):!0}};he.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Ir(e,t,n){if(typeof e!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const s=r[o],i=t[s];if(i){const a=e[s],u=a===void 0||i(a,s,e);if(u!==!0)throw new R("option "+s+" must be "+u,R.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new R("Unknown option "+s,R.ERR_BAD_OPTION)}}const oe={assertOptions:Ir,validators:he},B=oe.validators;let D=class{constructor(t){this.defaults=t,this.interceptors={request:new qe,response:new qe}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=I(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&oe.assertOptions(r,{silentJSONParsing:B.transitional(B.boolean),forcedJSONParsing:B.transitional(B.boolean),clarifyTimeoutError:B.transitional(B.boolean)},!1),o!=null&&(l.isFunction(o)?n.paramsSerializer={serialize:o}:oe.assertOptions(o,{encode:B.function,serialize:B.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),oe.assertOptions(n,{baseUrl:B.spelling("baseURL"),withXsrfToken:B.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&l.merge(s.common,s[n.method]);s&&l.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=F.concat(i,s);const a=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let f,d=0,b;if(!u){const m=[Ke.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),b=m.length,f=Promise.resolve(n);d<b;)f=f.then(m[d++],m[d++]);return f}b=a.length;let C=n;for(d=0;d<b;){const m=a[d++],w=a[d++];try{C=m(C)}catch(p){w.call(this,p);break}}try{f=Ke.call(this,C)}catch(m){return Promise.reject(m)}for(d=0,b=c.length;d<b;)f=f.then(c[d++],c[d++]);return f}getUri(t){t=I(this.defaults,t);const n=pt(t.baseURL,t.url,t.allowAbsoluteUrls);return ut(n,t.params,t.paramsSerializer)}};l.forEach(["delete","get","head","options"],function(t){D.prototype[t]=function(n,r){return this.request(I(r||{},{method:t,url:n,data:(r||{}).data}))}});l.forEach(["post","put","patch"],function(t){function n(r){return function(s,i,a){return this.request(I(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}D.prototype[t]=n(),D.prototype[t+"Form"]=n(!0)});let qr=class St{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s,i,a){r.reason||(r.reason=new V(s,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new St(function(o){t=o}),cancel:t}}};function $r(e){return function(n){return e.apply(null,n)}}function Hr(e){return l.isObject(e)&&e.isAxiosError===!0}const _e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_e).forEach(([e,t])=>{_e[t]=e});function Rt(e){const t=new D(e),n=Ye(D.prototype.request,t);return l.extend(n,D.prototype,t,{allOwnKeys:!0}),l.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Rt(I(e,o))},n}const A=Rt(Q);A.Axios=D;A.CanceledError=V;A.CancelToken=qr;A.isCancel=ht;A.VERSION=Et;A.toFormData=fe;A.AxiosError=R;A.Cancel=A.CanceledError;A.all=function(t){return Promise.all(t)};A.spread=$r;A.isAxiosError=Hr;A.mergeConfig=I;A.AxiosHeaders=F;A.formToJSON=e=>dt(l.isHTMLForm(e)?new FormData(e):e);A.getAdapter=wt.getAdapter;A.HttpStatusCode=_e;A.default=A;const{Axios:oo,AxiosError:so,CanceledError:io,isCancel:ao,CancelToken:co,VERSION:lo,all:uo,Cancel:fo,isAxiosError:ho,spread:mo,toFormData:po,AxiosHeaders:go,HttpStatusCode:yo,formToJSON:bo,getAdapter:wo,mergeConfig:Eo}=A,ee=e=>e.trim().toLowerCase().replace(/\s+/g," "),Gr=e=>{const[t,n]=h.useState(new Map),[r,o]=h.useState(!1),[s,i]=h.useState(null),a="b93a76ecb4b0439dbfe9e64c3c6aff07",u=h.useRef(new Set),c=JSON.stringify(e.slice().sort());return h.useEffect(()=>{const f=new AbortController,d=f.signal;return(async()=>{if(!e||e.length===0){n(new Map),o(!1),i(null),u.current.clear();return}const C=[],m=new Set;if(e.forEach(E=>{if(!E)return;const g=ee(E);!t.has(g)&&!u.current.has(g)&&(C.push(E),u.current.add(g),m.add(g))}),C.length===0){o(!1);const E=new Set(e.map(ee));u.current.forEach(g=>{E.has(g)||u.current.delete(g)});return}console.log(`[useGeoCoding] Batch geocoding ${C.length} new addresses.`),o(!0),i(null);const w=C.map(async E=>{var v,S,y,x;const g=ee(E);try{console.log(`[useGeoCoding] Checking cache for: "${g}"`);const _=await At(g);if(_)return console.log(`[useGeoCoding] Cache hit for "${g}"`),[g,{lat:_.latitude,lng:_.longitude}];if(d.aborted)throw new Error("Request aborted");console.log(`[useGeoCoding] Cache miss. Calling OpenCage API for: "${E}"`);const O=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(E)}&key=${a}&language=fr&pretty=1`,N=await A.get(O,{signal:d});if(d.aborted)throw new Error("Request aborted");if(((S=(v=N.data)==null?void 0:v.results)==null?void 0:S.length)>0){const{lat:z,lng:me}=N.data.results[0].geometry;return console.log(`[useGeoCoding] Geocoded "${E}" to:`,{lat:z,lng:me}),Ot(g,z,me).catch(vt=>{console.error(`[useGeoCoding] Error storing geocode cache for "${g}":`,vt)}),[g,{lat:z,lng:me}]}else return console.warn(`[useGeoCoding] No results found for address: "${E}"`),[g,null]}catch(_){if(A.isCancel(_)||_.message&&_.message.includes("aborted"))return console.log(`[useGeoCoding] Geocode request aborted for "${E}"`),[g,void 0];console.error(`[useGeoCoding] Error geocoding address "${E}":`,_);let O="Erreur de géocodage";return A.isAxiosError(_)&&(_.response?(O=`Erreur API (${_.response.status}): ${((x=(y=_.response.data)==null?void 0:y.status)==null?void 0:x.message)||"Erreur inconnue"}`,_.response.status===401||_.response.status===403?O="Clé API invalide":_.response.status===402&&(O="Quota API dépassé")):_.request&&(O="Pas de réponse du serveur")),_.code==="permission-denied"&&(O="Permission refusée pour l'écriture dans le cache de géocodage.",console.error("Firestore permission denied. Check your security rules for the 'geocodes' collection.")),i(N=>N?`${N} | ${O}`:O),[g,null]}}),p=await Promise.allSettled(w);d.aborted?console.log("[useGeoCoding] Effect aborted, skipping state update."):(n(E=>{const g=new Map(E);p.forEach(S=>{if(S.status==="fulfilled"&&S.value&&S.value[1]!==void 0){const[y,x]=S.value;g.set(y,x)}else S.status==="rejected"&&console.error("[useGeoCoding] Promise rejected:",S.reason);S.status==="fulfilled"&&S.value&&u.current.delete(S.value[0])});const v=new Set(e.map(ee));return u.current.forEach(S=>{v.has(S)||u.current.delete(S)}),g}),o(!1)),d.aborted&&m.forEach(E=>u.current.delete(E))})(),()=>{console.log("[useGeoCoding] Cleanup effect"),f.abort()}},[c,a]),{coordinates:t,isLoading:r,error:s}},$=e=>e.trim().split(/\s+/).map(t=>{const n=t.split(",");return[parseFloat(n[0]),parseFloat(n[1])]}).filter(t=>!isNaN(t[0])&&!isNaN(t[1])),Ct=[{feature:{type:"Feature",properties:{name:"Baptiste"},geometry:{type:"Polygon",coordinates:[$(`
            4.8836577,44.886044,0
            4.2842162,44.9924881,0
            3.8667357,44.7225929,0
            4.0644896,44.3231158,0
            4.646765,44.3034632,0
            5.4927123,44.1124911,0
            5.7151854,44.1834396,0
            5.4515135,44.405585,0
            5.836035,44.6894078,0
            5.4563201,44.7906117,0
            5.1425231,44.9652883,0
            5.0251067,44.94488,0
            4.8836577,44.886044,0
          `)]}}},{feature:{type:"Feature",properties:{name:"julien Isère"},geometry:{type:"Polygon",coordinates:[$(`
            5.4712372,45.0877866,0
            5.4087525,45.2146597,0
            5.3407746,45.3460764,0
            5.3579407,45.3923861,0
            5.154007,45.5084757,0
            5.1588727,45.6134865,0
            5.0592499,45.6488118,0
            4.8024445,45.5810905,0
            4.8628693,45.5253153,0
            4.7543793,45.4535917,0
            4.7548924,45.3637067,0
            4.8045044,45.3002118,0
            4.9947052,45.3475241,0
            5.1794129,45.2518931,0
            5.1505738,45.0800295,0
            5.3819733,45.0465649,0
            5.4712372,45.0877866,0
          `)]}}},{feature:{type:"Feature",properties:{name:"Julien"},geometry:{type:"Polygon",coordinates:[$(`
            5.4607639,44.7993594,0
            5.47999,45.0836844,0
            5.3804264,45.04343,0
            5.1462803,45.0788359,0
            5.1744328,45.2507031,0
            4.9952183,45.3444058,0
            4.8029575,45.2970908,0
            4.7548924,45.3637067,0
            4.5983372,45.2912944,0
            4.4905338,45.2303966,0
            4.2852268,44.9963497,0
            4.8812351,44.8894264,0
            5.0206242,44.946315,0
            5.1435337,44.968666,0
            5.4607639,44.7993594,0
          `)]}}},{feature:{type:"Feature",properties:{name:"Florian"},geometry:{type:"Polygon",coordinates:[$(`
            5.8179481,44.7013913,0
            6.1461645,44.8612524,0
            6.3569647,44.8558986,0
            6.3260653,45.0012533,0
            6.2072756,45.0187293,0
            6.2628937,45.1254119,0
            6.1619567,45.160767,0
            6.1303705,45.4370377,0
            5.9793082,45.5852412,0
            5.8893576,45.6020577,0
            5.6256856,45.6083024,0
            5.3626999,45.878565,0
            5.2226244,45.7661144,0
            5.0722489,45.7910165,0
            5.161513,45.6990145,0
            5.0592036,45.646717,0
            5.1615684,45.610667,0
            5.1546475,45.5049321,0
            5.3668206,45.3946213,0
            5.3482813,45.3459005,0
            5.4801178,45.0890645,0
            5.4718786,44.7959962,0
            5.8179481,44.7013913,0
          `)]}}},{feature:{type:"Feature",properties:{name:"Matthieu"},geometry:{type:"Polygon",coordinates:[$(`
            5.811555,46.0055516,0
            5.8369609,45.9325323,0
            5.8778364,45.8310799,0
            5.9590929,45.8132902,0
            5.9993579,45.7506936,0
            6.1535045,45.7550725,0
            6.18921,45.7004294,0
            6.3128062,45.6889188,0
            6.5181132,45.9038709,0
            6.7158671,45.7248816,0
            6.8023845,45.7718382,0
            7.0440837,45.9277564,0
            6.894395,46.118946,0
            6.8113109,46.1322712,0
            6.8628093,46.2829067,0
            6.7934581,46.3279694,0
            6.8161174,46.4269768,0
            6.5201732,46.458678,0
            6.2269755,46.3146916,0
            6.309373,46.2468299,0
            5.9578105,46.1346504,0
            5.8294078,46.1065697,0
            5.811555,46.0055516,0
          `)]}}},{feature:{type:"Feature",properties:{name:"Guillem"},geometry:{type:"Polygon",coordinates:[$(`
            5.8274262,45.9345997,0
            5.7704346,45.7264774,0
            5.6413453,45.6194831,0
            5.889911,45.6108379,0
            5.984668,45.5940239,0
            6.1350434,45.4458434,0
            6.1789887,45.1744565,0
            6.2696259,45.1376567,0
            6.4591401,45.0523449,0
            6.6376679,45.1095567,0
            7.1526521,45.251852,0
            7.185611,45.4053629,0
            6.807956,45.7648112,0
            6.7118256,45.7188075,0
            6.5181916,45.8968606,0
            6.3190644,45.6823611,0
            6.1831086,45.693873,0
            6.147403,45.7456476,0
            5.9935944,45.7446893,0
            5.9496491,45.8069479,0
            5.8741181,45.8241765,0
            5.8274262,45.9345997,0
          `)]}}}];Ct.forEach(e=>{e.feature.geometry.coordinates.forEach(t=>{if(t.length>0){const n=t[0],r=t[t.length-1];(n[0]!==r[0]||n[1]!==r[1])&&(console.warn(`[kmlZones] Polygon ring for "${e.feature.properties.name}" was not closed. Closing it.`),t.push(n))}})});const Jr="pk.eyJ1Ijoic2ltcGVyZnk0MDQiLCJhIjoiY201ZnFuNG5wMDBoejJpczZkNXMxNTBveCJ9.BM3MvMHuUkhQj91tQTChoQ",L={Baptiste:{color:"#FFEA00",opacity:.3},"julien Isère":{color:"#000000",opacity:.3},Julien:{color:"#097138",opacity:.3},Florian:{color:"#E65100",opacity:.3},Matthieu:{color:"#9C27B0",opacity:.3},Guillem:{color:"#9FA8DA",opacity:.3}},_t="#3388ff",Vr=.3,Wr={"fill-color":["match",["get","name"],"Baptiste",L.Baptiste.color,"julien Isère",L["julien Isère"].color,"Julien",L.Julien.color,"Florian",L.Florian.color,"Matthieu",L.Matthieu.color,"Guillem",L.Guillem.color,_t],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.5,["match",["get","name"],"Baptiste",L.Baptiste.opacity,"julien Isère",L["julien Isère"].opacity,"Julien",L.Julien.opacity,"Florian",L.Florian.opacity,"Matthieu",L.Matthieu.opacity,"Guillem",L.Guillem.opacity,Vr]]},Zr={"line-color":["match",["get","name"],"Baptiste",L.Baptiste.color,"julien Isère",L["julien Isère"].color,"Julien",L.Julien.color,"Florian",L.Florian.color,"Matthieu",L.Matthieu.color,"Guillem",L.Guillem.color,_t],"line-width":["case",["boolean",["feature-state","hover"],!1],4,2],"line-opacity":.8},Kr=e=>{if(!e)return"#808080";const t=e.toLowerCase();return t.includes("en cours")?"#FFA500":t.includes("fermé")?"#4CAF50":t.includes("annulé")?"#F44336":t.includes("demande de rma")?"#9C27B0":t.includes("nouveau")?"#2196F3":t.includes("ouvert")?"#FFEB3B":"#808080"},te=e=>e.trim().toLowerCase().replace(/\s+/g," "),So=({tickets:e,isLoadingTickets:t})=>{const[n,r]=h.useState({longitude:2.2137,latitude:46.2276,zoom:5.5}),[o,s]=h.useState(null),[i,a]=h.useState(null),[u,c]=h.useState(null),f=xt.useRef(null),d=h.useMemo(()=>{if(console.log("[InteractiveMap] Recalculating unique addresses..."),!Array.isArray(e))return[];const y=e.map(_=>_.adresse).filter(_=>typeof _=="string"&&_.trim()!==""),x=new Set(y);return console.log(`[InteractiveMap] Found ${x.size} unique addresses.`),Array.from(x)},[e]),{coordinates:b,isLoading:C,error:m}=Gr(d),w=h.useMemo(()=>(console.log("[InteractiveMap] Preparing zones GeoJSON..."),{type:"FeatureCollection",features:Ct.map((x,_)=>({...x.feature,id:_}))}),[]),p=h.useCallback(y=>{r(y.viewState)},[]),E=h.useCallback(()=>{console.log("[InteractiveMap] Map loaded."),f.current&&w.features.length>0&&console.log("[InteractiveMap] Map loaded, zones ready (bounds fitting skipped for simplicity).")},[w]),g=h.useCallback(y=>{var x,_,O;if(y.features&&y.features.length>0){const N=y.features[0];if(N.id!==void 0&&N.id!==u){u!==null&&((x=f.current)==null||x.setFeatureState({source:"zones-source",id:u},{hover:!1})),c(N.id),(_=f.current)==null||_.setFeatureState({source:"zones-source",id:N.id},{hover:!0});const z=(O=f.current)==null?void 0:O.getMap();z&&(z.getCanvas().style.cursor="pointer")}}},[u]),v=h.useCallback(()=>{var x,_;u!==null&&((x=f.current)==null||x.setFeatureState({source:"zones-source",id:u},{hover:!1})),c(null);const y=(_=f.current)==null?void 0:_.getMap();y&&(y.getCanvas().style.cursor="")},[u]);h.useEffect(()=>{if(m)console.error("[InteractiveMap] Geocoding Error:",m),s(y=>y?`${y} | Erreur Géocodage: ${m}`:`Erreur Géocodage: ${m}`);else if(o!=null&&o.includes("Géocodage")){const y=o.replace(/\|? Erreur Géocodage:.*?($|\|)/,"").trim();s(y||null)}},[m,o]);const S=h.useMemo(()=>!Array.isArray(e)||b.size===0?null:(console.log(`[InteractiveMap] Rendering ${e.length} tickets, ${b.size} geocoded.`),e.map(y=>{const x=y.adresse;if(!x||typeof x!="string"||x.trim()==="")return null;const _=te(x),O=b.get(_);if(O){const N=Kr(y.statut);return T.jsx(hn,{longitude:O.lng,latitude:O.lat,anchor:"center",onClick:z=>{z.originalEvent&&z.originalEvent.stopPropagation(),a(y)},children:T.jsx("div",{style:{backgroundColor:N,width:"15px",height:"15px",borderRadius:"50%",border:"2px solid white",boxShadow:"0 0 5px rgba(0,0,0,0.5)",cursor:"pointer"}})},y.id)}return null}).filter(Boolean)),[e,b]);return T.jsxs("div",{className:"bg-jdc-card p-4 rounded-lg shadow-lg relative min-h-[450px]",children:[T.jsxs("h2",{className:"text-xl font-semibold text-white mb-3 flex items-center",children:[T.jsx(Y,{icon:Lt,className:"mr-2 text-jdc-yellow"}),"Carte des Tickets Récents (Mapbox)"]}),(t||C&&b.size===0&&d.length>0)&&T.jsxs("div",{className:"absolute inset-0 z-[500] flex items-center justify-center bg-jdc-card bg-opacity-75 rounded-lg",children:[T.jsx(Y,{icon:Ae,spin:!0,className:"text-jdc-yellow text-3xl mr-2"}),T.jsx("span",{className:"text-white",children:t?"Chargement des tickets...":"Géocodage des adresses..."})]}),C&&!t&&T.jsx("div",{className:"absolute top-16 right-4 z-[1000] text-jdc-yellow",title:"Géocodage en cours...",children:T.jsx(Y,{icon:Ae,spin:!0})}),o&&!t&&!C&&T.jsxs("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 z-[1000] bg-red-800 text-white px-4 py-2 rounded text-sm shadow-lg flex items-center",children:[T.jsx(Y,{icon:Mt,className:"mr-2"}),o]}),T.jsx("div",{className:`w-full h-[450px] rounded-lg overflow-hidden ${t||C&&b.size===0&&d.length>0?"opacity-50":""}`,style:{backgroundColor:"#4a4a4a"},children:T.jsxs(dn,{ref:f,latitude:n.latitude,longitude:n.longitude,zoom:n.zoom,onMove:p,onLoad:E,mapboxAccessToken:Jr,mapStyle:"mapbox://styles/mapbox/streets-v11",style:{width:"100%",height:"100%"},onMouseEnter:g,onMouseLeave:v,interactiveLayerIds:["zones-fill-layer"],children:[T.jsxs(pn,{id:"zones-source",type:"geojson",data:w,generateId:!0,children:[T.jsx(ze,{id:"zones-fill-layer",type:"fill",source:"zones-source",paint:Wr}),T.jsx(ze,{id:"zones-line-layer",type:"line",source:"zones-source",paint:Zr})]}),S,i&&b.get(te(i.adresse||""))&&T.jsx(mn,{longitude:b.get(te(i.adresse||"")).lng,latitude:b.get(te(i.adresse||"")).lat,anchor:"bottom",onClose:()=>a(null),closeOnClick:!1,offset:15,children:T.jsxs("div",{children:[T.jsx("b",{children:i.raisonSociale||"Client inconnu"}),T.jsx("br",{}),i.adresse,T.jsx("br",{}),"Statut: ",i.statut||"Non défini",T.jsx("br",{}),"ID: ",i.id]})})]})})]})};export{So as default};
